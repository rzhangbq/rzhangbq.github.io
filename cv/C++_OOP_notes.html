
<!DOCTYPE html>
<html>
  <head>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K2PPY8ML6V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-K2PPY8ML6V');
    </script>

    <title>C++ OOP notes</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    .markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}pre{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;padding:1em;margin:.5em 0;overflow:auto;line-height:1.5;tab-size:4;hyphens:none;color:#2b3f6a;background-color:#eee9dd !important;border:#ddd3bb;border-radius:3px}pre[class*="language-"]{padding:1em}code[class*="language-"] .token.comment,pre[class*="language-"] .token.comment,code[class*="language-"] .token.prolog,pre[class*="language-"] .token.prolog,code[class*="language-"] .token.doctype,pre[class*="language-"] .token.doctype,code[class*="language-"] .token.cdata,pre[class*="language-"] .token.cdata{color:#9ca3b0;font-style:italic}code[class*="language-"] .token.punctuation,pre[class*="language-"] .token.punctuation{color:#9ca3b0}code[class*="language-"] .namespace,pre[class*="language-"] .namespace{opacity:.7}code[class*="language-"] .token.constant,pre[class*="language-"] .token.constant{color:#c16161}code[class*="language-"] .token.boolean,pre[class*="language-"] .token.boolean,code[class*="language-"] .token.number,pre[class*="language-"] .token.number,code[class*="language-"] .token.function-name,pre[class*="language-"] .token.function-name{color:#c16161}code[class*="language-"] .token.tag,pre[class*="language-"] .token.tag{color:#ac4343}code[class*="language-"] .token.symbol,pre[class*="language-"] .token.symbol{color:#8f932b}code[class*="language-"] .token.selector,pre[class*="language-"] .token.selector{color:#d08e25}code[class*="language-"] .token.attr-name,pre[class*="language-"] .token.attr-name{color:#d08e25}code[class*="language-"] .token.string,pre[class*="language-"] .token.string{background-color:rgba(255,204,0,0.03);color:rgba(106,68,28,0.77)}code[class*="language-"] .token.char,pre[class*="language-"] .token.char{color:#8f932b}code[class*="language-"] .token.url,pre[class*="language-"] .token.url{color:#d08e25}code[class*="language-"] .token.atrule,pre[class*="language-"] .token.atrule,code[class*="language-"] .token.attr-value,pre[class*="language-"] .token.attr-value,code[class*="language-"] .token.keyword,pre[class*="language-"] .token.keyword{color:#8f932b}code[class*="language-"] .token.function,pre[class*="language-"] .token.function{color:#d08e25}code[class*="language-"] .token.class-name,pre[class*="language-"] .token.class-name{color:#2b3f6a}code[class*="language-"] .token.variable,pre[class*="language-"] .token.variable{color:#5e78e1}code[class*="language-"] .token.regex,pre[class*="language-"] .token.regex,code[class*="language-"] .token.important,pre[class*="language-"] .token.important{color:#379566}code[class*="language-"] .token.important,pre[class*="language-"] .token.important,code[class*="language-"] .token.bold,pre[class*="language-"] .token.bold{font-weight:bold}code[class*="language-"] .token.italic,pre[class*="language-"] .token.italic{font-style:italic}code[class*="language-"] .token.entity,pre[class*="language-"] .token.entity{cursor:help}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:rgba(153,122,102,0.08);background:linear-gradient(to right, rgba(153,122,102,0.1) 70%, rgba(153,122,102,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:rgba(153,122,102,0.4);color:#f5f2f0;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px white}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}.emoji {
  height: 0.8em;
}body{font-size:16px;background-color:#f3f2ee;font-family:"PT Serif",'Times New Roman',Times;color:#1f0909;line-height:1.5em}body ol,body ul{list-style:none}body blockquote,body q{quotes:none}body blockquote:before,body blockquote:after,body q:before,body q:after{content:'';content:none}body table{border-collapse:collapse;border-spacing:0}body h1,body h2,body h3,body h4,body h5,body h6{font-weight:bold}body h1{font-size:1.875em;line-height:1.6em;margin-top:2em}body h2,body h3{font-size:1.3125em;line-height:1.15;margin-top:2.285714em;margin-bottom:1.15em}body h3{font-weight:normal}body h4{font-size:1.125em;margin-top:2.67em}body h5,body h6{font-size:1em}body h1{border-bottom:1px solid;margin-bottom:1.875em;padding-bottom:.8125em}body a{text-decoration:none;color:#065588}body a:hover,body a:active{text-decoration:underline}body p,body blockquote,body .md-fences{margin-bottom:1.5em}body h1,body h2,body h3,body h4,body h5,body h6{margin-bottom:1.5em}body blockquote{font-style:italic;border-left:5px solid;margin-left:2em;padding-left:1em}body ul,body ol{margin:0 0 1.5em 1.5em}body ol li{list-style-type:decimal;list-style-position:outside}body ul li{list-style-type:disc;list-style-position:outside}body li>p{margin-top:0;margin-bottom:0}body .md-meta,body .md-before,body .md-after{color:#999}body table{margin-bottom:1.5em;font-size:1em}body thead th,body tfoot th{padding:.25em .25em .25em .4em;text-transform:uppercase}body th{text-align:left}body td{vertical-align:top;padding:.25em .25em .25em .4em}body code,body .md-fences{color:inherit;background-color:#dadada;padding-left:1ch;padding-right:1ch}body pre code{background-color:inherit}body .md-fences{margin-left:2em;margin-bottom:3em}body .md-fences .CodeMirror.CodeMirror-wrap{top:-0.8em}body pre,body code,body tt{font-size:.875em;line-height:1.714285em}body h1{line-height:1.3em;font-weight:normal;margin-bottom:.5em}body p+ul,body p+ol{margin-top:-1em}body h3+ul,body h4+ul,body h5+ul,body h6+ul,body h3+ol,body h4+ol,body h5+ol,body h6+ol{margin-top:.5em}body li>ul,body li>ol{margin-top:inherit}body h2,body h3{margin-bottom:.75em}body hr{border-top:none;border-right:none;border-bottom:1px solid;border-left:none}body h1{border-color:#c5c5c5}body blockquote{border-color:#bababa;color:#656565;background-color:#e6e4dc}body thead.md-table-edit{background-color:transparent}body thead{background-color:#dadada}body tr:nth-child(even){background:#e8e7e7}body hr{border-color:#c5c5c5}body .task-list{padding-left:1rem}body .task-list-item{list-style-type:none;margin-left:-1.8em}body .task-list-item .task-list-item-checkbox{margin-right:.8em}body .task-list-item input:before{content:'\221A';display:inline-block;width:1.25rem;height:1.5rem;vertical-align:middle;text-align:center;color:#ddd;background-color:#F3F2EE}body .task-list-item input:checked:before,body .task-list-item input[checked]:before{color:inherit}body img{max-width:100%}body kbd{color:#1f0909}
    @import "/Users/rsz/Library/Application Support/abnerworks.Typora/themes/latex.css";

    </style>
    
  </head>
  <body for="html-export">
    <div class="mume markdown-preview">
    <html>
      <p><a href="https://rzhangbq.github.io/">Home</a></p><head></head><body><div><h1 class="mume-header" id="c-notes-oop">C++ notes - OOP</h1>

<p>Written by ZHANG Rushan.</p>
<p><strong>Note:</strong> &quot;poor guy&quot; == &quot;temporary object&quot;</p>
<h2 class="mume-header" id="0-cautions">0. Cautions</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">    <span class="token number">1.</span><span class="token string">&quot;Automatic 0-initialization&quot;</span>
        <span class="token number">1.</span> global
        <span class="token number">2.</span> STL

    <span class="token number">2.</span><span class="token string">&quot;Where to put keywords?&quot;</span>
        must only be in function declaration <span class="token string">&quot;inside class&quot;</span>
            <span class="token number">1.</span> <span class="token keyword keyword-override">override</span>
            <span class="token number">2.</span> <span class="token keyword keyword-virtual">virtual</span>
            <span class="token number">3.</span> <span class="token keyword keyword-explicit">explicit</span>
            <span class="token number">4.</span> <span class="token operator">=</span><span class="token number">0</span>       <span class="token comment">// no definition</span>
            <span class="token number">5.</span> <span class="token operator">=</span><span class="token keyword keyword-default">default</span> <span class="token comment">// no definition</span>
        must be both at declaration <span class="token operator">and</span> definition
            <span class="token number">1.</span> <span class="token keyword keyword-const">const</span>
            <span class="token string">&quot;const keyword must be closest to the function parameter list&quot;</span>

    <span class="token number">3.</span><span class="token string">&quot;be careful when using accessor is necessary&quot;</span>
        e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> when accessing <span class="token keyword keyword-private">private</span> of parents
    
    <span class="token number">4.</span><span class="token string">&quot;do not forget to use the default ones given for free from compiler&quot;</span>
        e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
            <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span>
            copy constructor
    
    <span class="token number">5.</span><span class="token string">&quot;do not forget to use dynamic cast&quot;</span>
        <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>type_cast_name<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>variable_name<span class="token punctuation">)</span>
        necessary when
            accessing data of child
            <span class="token keyword keyword-using">using</span> child type pointer<span class="token operator">/</span>reference to point at parent pointer<span class="token operator">/</span>reference
                child type pointer<span class="token operator">/</span>reference can <span class="token operator">not</span> point to parent pointer<span class="token operator">/</span>reference
                even <span class="token keyword keyword-if">if</span> the parent pointer<span class="token operator">/</span>reference is pointing to a child

    <span class="token number">6.</span><span class="token string">&quot;do not forget to add template declaration&quot;</span>
        <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
        <span class="token class-name">class_template_name</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">function_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        in <span class="token string">&quot;class body&quot;</span>
            no need to add <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> anywhere except <span class="token keyword keyword-for">for</span> <span class="token keyword keyword-friend">friend</span> function
                <span class="token keyword keyword-for">for</span> <span class="token keyword keyword-friend">friend</span> function<span class="token punctuation">,</span> has to declare another <span class="token keyword keyword-template">template</span>
                <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">S</span><span class="token operator">&gt;</span>
        outside <span class="token string">&quot;class body&quot;</span>
            has to add <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">:</span>
                <span class="token number">1.</span> <span class="token keyword keyword-return">return</span> type
                <span class="token number">2.</span> scope
                <span class="token number">3.</span> everything in <span class="token keyword keyword-friend">friend</span> function
                    key reason<span class="token operator">:</span> <span class="token keyword keyword-friend">friend</span> function is <span class="token operator">not</span> member function
                    in declaration of <span class="token keyword keyword-friend">friend</span> function in <span class="token string">&quot;class template&quot;</span>
                        <span class="token string">&quot;has to name another template&quot;</span>
                <span class="token number">4.</span> another independent <span class="token string">&quot;class template&quot;</span>
            
            optional<span class="token operator">:</span>
                everything within local scope<span class="token punctuation">,</span> including parameter list
                
            definitely <span class="token keyword keyword-do">do</span> <span class="token operator">not</span> add <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">:</span>
                constructor name
                <span class="token string">&quot;class defined in its own class body&quot;</span>
                    e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> BSTnode
                    <span class="token keyword keyword-this">this</span> is because<span class="token punctuation">,</span> BSTnode is <span class="token operator">not</span> a <span class="token keyword keyword-template">template</span>
            
            good practice<span class="token operator">:</span>
                add everywhere except cases that we definitely should <span class="token operator">not</span> add <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
    
    <span class="token number">7.</span>can call member function in all member functions including constructors <span class="token operator">and</span> desctuctor

    <span class="token number">8.</span><span class="token keyword keyword-do">do</span> <span class="token operator">not</span> forget to declare function <span class="token keyword keyword-template">template</span> again <span class="token keyword keyword-for">for</span> <span class="token keyword keyword-friend">friend</span> function

    <span class="token number">9.</span><span class="token keyword keyword-do">do</span> <span class="token operator">not</span> use non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> data members as <span class="token keyword keyword-default">default</span> value <span class="token keyword keyword-for">for</span> member functions
</pre><h2 class="mume-header" id="01-class-revision">01. class revision</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span><span class="token string">&quot;class = data members + member functions&quot;</span>
      <span class="token keyword keyword-class">class</span> <span class="token class-name">Person</span>
      <span class="token punctuation">{</span>
         <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
            <span class="token keyword keyword-char">char</span><span class="token operator">*</span> _name<span class="token punctuation">;</span>
            <span class="token keyword keyword-int">int</span> _age<span class="token punctuation">;</span>
            Person <span class="token operator">*</span>_father<span class="token punctuation">,</span> <span class="token operator">*</span>_mother<span class="token punctuation">,</span> <span class="token operator">*</span>_child<span class="token punctuation">;</span>
         <span class="token comment">// it is a convention to have an underscore for data members</span>
         <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
            <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// constructor</span>
            <span class="token comment">// same name as the class</span>
            <span class="token comment">// no return type</span>
            <span class="token comment">// cannot be called</span>
            <span class="token comment">// will be called when initialized</span>

            <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// destructor</span>
            <span class="token comment">// will be called before an object is</span>
    
            Person<span class="token operator">*</span> <span class="token function">father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>	<span class="token comment">// const: will not change the data members</span>
            Person<span class="token operator">*</span> <span class="token function">mother</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
            Person<span class="token operator">*</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
            <span class="token comment">// accessor, returning the data members</span>
    
            <span class="token keyword keyword-void">void</span> <span class="token function">have_child</span><span class="token punctuation">(</span>Person<span class="token operator">*</span> baby<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// mutator, modifying the data of the data members</span>
      <span class="token punctuation">}</span>
    
      <span class="token string">&quot;Constructors are usually put public, if not public, it cannot be called successfully&quot;</span>
      <span class="token string">&quot;You are not allowed to put const on constructor&quot;</span>
         <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>   <span class="token comment">// not allowed</span>
      <span class="token string">&quot;If the constructor does not require any parameter, do not add &apos;()&apos;&quot;</span> 
         Person obj<span class="token punctuation">;</span>    <span class="token comment">// correct</span>
         Person <span class="token function">obj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// incorrect</span>
         <span class="token comment">// will be taken as function declaration</span>

   <span class="token number">2.</span><span class="token string">&quot;object&quot;</span>
         Person desmond<span class="token punctuation">;</span>
         <span class="token comment">// this is an object called desmond</span>
         Person john<span class="token punctuation">;</span>
         <span class="token comment">// this is an object called john</span>
         Person tom<span class="token punctuation">;</span>
         <span class="token comment">// this is an object called tom</span>

   <span class="token number">3.</span><span class="token string">&quot;header file&quot;</span>
      <span class="token string">&quot;class_name.h&quot;</span>
         interface of the <span class="token string">&quot;class&quot;</span>
         excluding the member function implementation
      <span class="token string">&quot;class_name.cpp&quot;</span>
         including the member function implementation
      Why to <span class="token keyword keyword-do">do</span> so<span class="token operator">?</span>
         send <span class="token punctuation">.</span>h file to others as interface<span class="token punctuation">,</span>
         <span class="token operator">and</span> also the compiled <span class="token punctuation">.</span>cpp <span class="token function">code</span><span class="token punctuation">(</span>binary code<span class="token punctuation">)</span>
            in <span class="token keyword keyword-this">this</span> way<span class="token punctuation">,</span> others cannot know the code used to implement the <span class="token keyword keyword-class">class</span>
            <span class="token string">&quot;keeping your code confidential&quot;</span>
      e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         <span class="token string">&quot;.h file&quot;</span>
         <span class="token comment">// interface</span>
            <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
            <span class="token keyword keyword-using">using</span> <span class="token keyword keyword-namespace">namespace</span> std<span class="token punctuation">;</span>
            
            <span class="token keyword keyword-class">class</span> <span class="token class-name">Person</span>
            <span class="token punctuation">{</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
               <span class="token keyword keyword-char">char</span><span class="token operator">*</span> _name<span class="token punctuation">;</span>
               <span class="token keyword keyword-int">int</span> _age<span class="token punctuation">;</span>
                  Person <span class="token operator">*</span>_father<span class="token punctuation">,</span> <span class="token operator">*</span>_mother<span class="token punctuation">,</span> <span class="token operator">*</span>_child<span class="token punctuation">;</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> my_name<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> my_age<span class="token punctuation">,</span> Person<span class="token operator">*</span> my_father <span class="token operator">=</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span>
                        Person<span class="token operator">*</span> my_mother <span class="token operator">=</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">,</span> Person<span class="token operator">*</span> my_child <span class="token operator">=</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               &#x2DC;<span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               Person<span class="token operator">*</span> <span class="token function">father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
               Person<span class="token operator">*</span> <span class="token function">mother</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
               Person<span class="token operator">*</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">print_age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">print_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">print_family</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">have_child</span><span class="token punctuation">(</span>Person<span class="token operator">*</span> baby<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token string">&quot;.cpp file&quot;</span>
         <span class="token comment">// implementation</span>
            <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;person.h&quot;</span> <span class="token comment">// the .h file</span></span>
            <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span>
    
            <span class="token comment">// constructor</span>
            <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> my_name<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token comment">// including all the data members</span>
            <span class="token punctuation">{</span>
               _name <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-char">char</span><span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>my_name<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
               <span class="token function">strcpy</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> my_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// assigning all the data members</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// destructor</span>
            <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword keyword-delete">delete</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> name<span class="token punctuation">;</span><span class="token punctuation">}</span>
    
            <span class="token comment">// accessor</span>
            Person<span class="token operator">*</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> <span class="token keyword keyword-return">return</span> _father<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            Person<span class="token operator">*</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">mother</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> <span class="token keyword keyword-return">return</span> _mother<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            Person<span class="token operator">*</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> <span class="token keyword keyword-return">return</span> _child<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
            <span class="token comment">// mutator</span>
            <span class="token keyword keyword-void">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">have_child</span><span class="token punctuation">(</span>Person<span class="token operator">*</span> baby<span class="token punctuation">)</span> <span class="token punctuation">{</span> _child <span class="token operator">=</span> baby<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
            <span class="token comment">// const member functions</span>
            <span class="token keyword keyword-void">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">print_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span>
            <span class="token punctuation">{</span>
               cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>_name <span class="token operator">?</span> _name <span class="token operator">:</span> <span class="token string">&quot;unknown&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token comment">// ternary choice, to make sure things printed out is always valid</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-void">void</span> <span class="token function">print_parent</span><span class="token punctuation">(</span>Person<span class="token operator">*</span> parent<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
               <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
                  parent<span class="token operator">-&gt;</span><span class="token function">print_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-else">else</span>
                  cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;unknown&quot;</span><span class="token punctuation">;</span>
               <span class="token comment">// before calling a member function of a class pointer, always check whether the pointer is nullptr</span>
            <span class="token punctuation">}</span>
    
         <span class="token string">&quot;do not forget the &quot;</span>Person<span class="token double-colon punctuation">::</span><span class="token string">&quot; for scope&quot;</span>
         <span class="token string">&quot;do not forget the &quot;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token string">&quot; when deallocating array pointer&quot;</span>
         <span class="token string">&quot;always use &quot;</span><span class="token keyword keyword-const">const</span><span class="token string">&quot; when modifying member data is not necessary&quot;</span>
            <span class="token string">&quot;add &apos;const&apos; in both declaration (in class) and definition (outside class)&quot;</span>
            <span class="token string">&quot;&quot;</span><span class="token keyword keyword-const">const</span><span class="token string">&quot; is not allowed for constructor&quot;</span>
    
         <span class="token string">&quot;the &quot;</span><span class="token operator">*</span><span class="token string">&quot; goes with the variable, not with the data type&quot;</span>
            <span class="token keyword keyword-int">int</span> <span class="token operator">*</span>p<span class="token punctuation">,</span> q<span class="token punctuation">;</span>
            <span class="token comment">// p is a pointer </span>
            <span class="token comment">// q is an int</span>
         <span class="token string">&quot;before calling a member function of a class pointer, always check whether the pointer is nullptr&quot;</span>

   <span class="token number">4.</span><span class="token string">&quot;member functions includes:&quot;</span>
      constructor
      destructor
      accessor <span class="token comment">// returning member data</span>
      mutator  <span class="token comment">// changing member data</span>
      constant member function

   <span class="token number">5.</span><span class="token string">&quot;struct vs class&quot;</span>
      data in <span class="token string">&quot;struct&quot;</span> is <span class="token keyword keyword-public">public</span> by <span class="token keyword keyword-default">default</span>
      data in <span class="token string">&quot;class&quot;</span> is <span class="token keyword keyword-private">private</span> by <span class="token keyword keyword-default">default</span>
         <span class="token keyword keyword-struct">struct</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
            <span class="token comment">// same as class { public:...}</span>
         <span class="token keyword keyword-class">class</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
            <span class="token comment">// same as struct { private:...}</span>

      <span class="token string">&quot;struct in C&quot;</span> can only carry data members
      <span class="token string">&quot;struct in C++&quot;</span> can carry both data members <span class="token operator">and</span> member functions

   <span class="token number">6.</span><span class="token string">&quot;you can declare a class, and define it later&quot;</span>
      <span class="token string">&quot;it is okay to include multiple class declarations&quot;</span>
      when declaring <span class="token string">&quot;friend class&quot;</span><span class="token punctuation">,</span> it is no need to declare that <span class="token string">&quot;class&quot;</span> in advance

   <span class="token number">7.</span><span class="token string">&quot;data members&quot;</span>
      <span class="token number">1.</span>can be any basic type

      <span class="token number">2.</span>can be user<span class="token operator">-</span>defined types already defined
         can <span class="token operator">not</span> be user<span class="token operator">-</span>defined <span class="token string">&quot;class&quot;</span> that is declared but <span class="token operator">not</span> defined
    
      <span class="token number">3.</span>can be <span class="token string">&quot;pointer&quot;</span> <span class="token operator">or</span> <span class="token string">&quot;reference&quot;</span> of user<span class="token operator">-</span>defined types already <span class="token string">&quot;declared&quot;</span>
         can <span class="token operator">not</span> be the <span class="token string">&quot;class itself&quot;</span> that is <span class="token operator">not</span> defined
      
      <span class="token number">4.</span>can be the <span class="token string">&quot;pointer&quot;</span> of the being<span class="token operator">-</span>defined <span class="token string">&quot;class&quot;</span>
         can <span class="token operator">not</span> be the <span class="token string">&quot;class itself&quot;</span>

         <span class="token keyword keyword-class">class</span> <span class="token class-name">Cell</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">List</span>
         <span class="token punctuation">{</span>
               <span class="token keyword keyword-int">int</span> size<span class="token punctuation">;</span>
               Cell<span class="token operator">*</span> data<span class="token punctuation">;</span> <span class="token comment">// allowed</span>
               Cell x<span class="token punctuation">;</span>     <span class="token comment">// not allowed</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Cell</span>
         <span class="token punctuation">{</span>
               <span class="token keyword keyword-int">int</span> info<span class="token punctuation">;</span>
               Cell<span class="token operator">*</span> next<span class="token punctuation">;</span>
               Cell xl<span class="token punctuation">;</span>		<span class="token comment">// not allowed</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>

   <span class="token number">8.u</span>sually<span class="token punctuation">,</span> we would make the data member of link list nodes <span class="token keyword keyword-public">public</span>
      faster than accessor
      we can use <span class="token string">&quot;struct&quot;</span>

   <span class="token number">9.</span><span class="token keyword keyword-default">default</span> value <span class="token keyword keyword-for">for</span> Non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> Members
      you can define <span class="token operator">and</span> assign number to <span class="token string">&quot;data members&quot;</span> at the same time
         <span class="token string">&quot;only for C++ 11 or later versions&quot;</span>
         use either <span class="token string">&quot;=&quot;</span> <span class="token operator">or</span> <span class="token string">&quot;{}&quot;</span> initializer
         can <span class="token operator">not</span> use <span class="token string">&quot;()&quot;</span> initializer

   <span class="token number">10.</span><span class="token string">&quot;{}, () initializer&quot;</span>
      <span class="token string">&quot;only for C++ 11 or later versions&quot;</span>
         <span class="token keyword keyword-int">int</span> a<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">// () is not allowed in class data member initialization</span>

      <span class="token comment">// similar to class constructor</span>
      <span class="token string">&quot;&quot;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token string">&quot; doesn&#x2019;t allow us to do narrowing conversion, but &quot;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token string">&quot; and &quot;</span><span class="token operator">=</span><span class="token string">&quot; do&quot;</span>
      <span class="token string">&quot;&quot;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token string">&quot; is not allowed in class data member initialization&quot;</span>

   <span class="token number">11.</span><span class="token string">&quot;inline function revision&quot;</span>
      functions defined <span class="token string">&quot;within class body&quot;</span> are by <span class="token keyword keyword-default">default</span> <span class="token keyword keyword-inline">inline</span> function
         However<span class="token punctuation">,</span> it would be more readable to put <span class="token string">&quot;inline&quot;</span>
      <span class="token keyword keyword-for">for</span> functions <span class="token string">&quot;outside class body&quot;</span><span class="token punctuation">,</span> <span class="token operator">and</span> <span class="token string">&quot;still in the same file or in the included header file&quot;</span><span class="token punctuation">,</span> 
         you can specify <span class="token string">&quot;inline&quot;</span>
         <span class="token string">&quot;this specification is mandatory&quot;</span>
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         <span class="token keyword keyword-inline">inline</span> Person<span class="token operator">*</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> _child<span class="token punctuation">}</span>
            only be fulfilled <span class="token keyword keyword-if">if</span> placed <span class="token string">&quot;in the same file&quot;</span>
      the <span class="token keyword keyword-inline">inline</span> keyword can be placed at declaration <span class="token operator">or</span> definition <span class="token operator">or</span> both

   <span class="token number">12.</span><span class="token string">&quot;scope operator&quot;</span>
      <span class="token keyword keyword-int">int</span> height <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-class">class</span> <span class="token class-name">Weird</span>
      <span class="token punctuation">{</span>
         <span class="token keyword keyword-short">short</span> height<span class="token punctuation">;</span>
         <span class="token function">Weird</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-void">void</span> <span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> height<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
            Weird<span class="token double-colon punctuation">::</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span> <span class="token comment">// okay, but rarely used</span>
            <span class="token comment">// this-&gt;height: data member</span>
            <span class="token comment">// height: parameter</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token class-name">Weird</span><span class="token double-colon punctuation">::</span><span class="token function">Weird</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         height <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>    <span class="token comment">// referring to the data member</span>
         <span class="token double-colon punctuation">::</span>height <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>  <span class="token comment">// referring to the global variable</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// precedence: function parameter &gt; data member (this-&gt;) &gt; global variable (::)</span>
</pre><h2 class="mume-header" id="02-basic-syntex-revision">02. basic syntex revision</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span><span class="token string">&quot;must initialize with the value when declaration&quot;</span>
      reference variable
      <span class="token keyword keyword-const">const</span> variable
      <span class="token keyword keyword-const">const</span> pointer
      
   <span class="token number">2.</span><span class="token string">&quot;uses of &amp;&quot;</span>
      bitwise <span class="token operator">and</span> logic
      reference variable
      address

   <span class="token number">3.</span><span class="token string">&quot;uses of *&quot;</span>
      multiply
      pointer variable
      dereference

   <span class="token number">4.</span><span class="token string">&quot;pointer vs reference&quot;</span>
      pointer can point to nothing<span class="token punctuation">,</span> reference should bound to another variable
      pointer can to point at difference variables at difference times
      many symbols working with pointer<span class="token punctuation">,</span> but <span class="token operator">not</span> with reference variables
         <span class="token operator">*</span>
         <span class="token operator">-&gt;</span>
   <span class="token number">5.</span><span class="token string">&quot;pointer arithmetic&quot;</span>
      <span class="token operator">+</span><span class="token punctuation">,</span><span class="token operator">-</span>
      the value change of pointer
         <span class="token keyword keyword-int">int</span> x<span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>
         p <span class="token operator">=</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
         <span class="token comment">// adding the size of x (int, 4 bites) to p</span>
      the position change of pointer
         <span class="token keyword keyword-int">int</span> x<span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>
         p <span class="token operator">=</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
         <span class="token comment">// moving downward one position</span>
     <span class="token string">&quot;it is possible to have a pointer subtract another pointer&quot;</span>
         <span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token operator">*</span>q <span class="token operator">=</span> <span class="token operator">&amp;</span>y<span class="token punctuation">;</span>
         cout <span class="token operator">&lt;&lt;</span> p <span class="token operator">-</span> q <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
         <span class="token comment">// you get 1 here</span>

      how is address allocated in stack<span class="token operator">?</span>
         <span class="token keyword keyword-int">int</span> x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-short">short</span> a <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
      in the memory space <span class="token string">&quot;stack&quot;</span>
         <span class="token comment">// the &quot;0x7ffeeb6b982e&quot; are memory address</span>
         <span class="token comment">// each one is a memory cell, 1 byte</span>
         <span class="token string">&quot;int x&quot;</span> <span class="token comment">// = 20</span>
         <span class="token number">0x7ffeeb6b9839</span>
         <span class="token number">0x7ffeeb6b9838</span>
         <span class="token number">0x7ffeeb6b9837</span>
         <span class="token number">0x7ffeeb6b9836</span> <span class="token comment">// the address of x</span>
         <span class="token string">&quot;int y&quot;</span> <span class="token comment">// = 10</span>
         <span class="token number">0x7ffeeb6b9835</span>
         <span class="token number">0x7ffeeb6b9834</span>
         <span class="token number">0x7ffeeb6b9833</span>
         <span class="token number">0x7ffeeb6b9832</span> <span class="token comment">// the address of y</span>
         <span class="token string">&quot;short a&quot;</span> <span class="token comment">// = 99</span>
         <span class="token number">0x7ffeeb6b9831</span>
         <span class="token number">0x7ffeeb6b9830</span> <span class="token comment">// the address of a</span>
         <span class="token string">&quot;short b&quot;</span> <span class="token comment">// = 9</span>
         <span class="token number">0x7ffeeb6b982f</span>
         <span class="token number">0x7ffeeb6b982e</span> <span class="token comment">// the address of b</span>

      comparisons
         <span class="token operator">&lt;</span>
            pointing to a lower memory than
         <span class="token operator">&gt;</span>
            pointing to a higher memory than
         <span class="token operator">==</span>
            pointing to the same memory

   <span class="token number">6.</span><span class="token string">&quot;return by reference&quot;</span>
      only <span class="token keyword keyword-return">return</span> by reference <span class="token keyword keyword-if">if</span> the object returned will <span class="token operator">not</span> be killed
         <span class="token string">&quot;never return by reference a static object&quot;</span>
      will <span class="token operator">not</span> create a temporary memory space when returning 
         <span class="token string">&quot;exception: const reference to wrong type or const literal&quot;</span>
         less expensive
      <span class="token string">&quot;to be more specific, this is lvalue reference&quot;</span>

      <span class="token string">&quot;lvalue&quot;</span><span class="token operator">:</span>
         occupies some identifiable location in memory
      <span class="token string">&quot;rvalue&quot;</span><span class="token operator">:</span>
         does <span class="token operator">not</span> represent an object occupying some location in memory
         like <span class="token string">&quot;immediate&quot;</span> in <span class="token function">MIPS</span> <span class="token punctuation">(</span>COMP2611<span class="token punctuation">)</span>
   <span class="token number">7.</span><span class="token string">&quot;const key word&quot;</span>
      <span class="token number">1.</span><span class="token string">&quot;const normal&quot;</span>
         <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-float">float</span> PI <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token keyword keyword-const">const</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
      <span class="token number">2.</span><span class="token string">&quot;const reference&quot;</span>
         <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> <span class="token operator">&amp;</span>x <span class="token operator">=</span> e<span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token keyword keyword-const">const</span> <span class="token operator">&amp;</span>x <span class="token operator">=</span> e<span class="token punctuation">;</span>
         <span class="token comment">// cannot be: // int&amp; const x = e;</span>
            cannot modify through the reference variable
            cannot be referred to by another non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> reference
               <span class="token string">&quot;lowering level of protection&quot;</span>
            can still be modified through the referred variable itself
               <span class="token keyword keyword-int">int</span> e <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> <span class="token operator">&amp;</span>x <span class="token operator">=</span> e<span class="token punctuation">;</span>
               x <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>   <span class="token comment">// not allowed</span>
               e <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>   <span class="token comment">// allowed   </span>
      <span class="token number">3.</span><span class="token string">&quot;const class object&quot;</span>
         only <span class="token keyword keyword-const">const</span> member functions can be called
            &quot;even <span class="token keyword keyword-if">if</span> a member function does <span class="token operator">not</span> modify data member<span class="token punctuation">,</span> 
            <span class="token keyword keyword-if">if</span> <span class="token operator">not</span> <span class="token keyword keyword-protected">protected</span> by <span class="token string">&quot;const&quot;</span> word<span class="token punctuation">,</span> 
            the <span class="token keyword keyword-const">const</span> object cannot call it&quot;

      <span class="token number">4.</span><span class="token string">&quot;const member function&quot;</span>
         cannot modify data members
      <span class="token number">5.</span><span class="token string">&quot;const related to pointer&quot;</span>
         <span class="token number">1.</span> <span class="token keyword keyword-const">const</span> pointer
            <span class="token keyword keyword-int">int</span><span class="token operator">*</span> <span class="token keyword keyword-const">const</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
            <span class="token string">&quot;cannot bind to other objects&quot;</span>
         <span class="token number">2.</span> pointer to <span class="token keyword keyword-const">const</span> object
            <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span><span class="token operator">*</span> r <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
            <span class="token keyword keyword-int">int</span> <span class="token keyword keyword-const">const</span> <span class="token operator">*</span>s <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
            <span class="token string">&quot;cannot change the value of the object through the pointer&quot;</span>
         <span class="token number">3.</span> <span class="token keyword keyword-const">const</span> pointer to <span class="token keyword keyword-const">const</span> object
            <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span> <span class="token operator">*</span><span class="token keyword keyword-const">const</span> pc <span class="token operator">=</span> <span class="token operator">&amp;</span>c<span class="token punctuation">;</span>
            <span class="token keyword keyword-char">char</span> <span class="token keyword keyword-const">const</span> <span class="token operator">*</span><span class="token keyword keyword-const">const</span> pc <span class="token operator">=</span> <span class="token operator">&amp;</span>c<span class="token punctuation">;</span>

         <span class="token string">&quot;cannot assign a _pointer to const object_ to a _normal const_&quot;</span>
            <span class="token keyword keyword-int">int</span> <span class="token operator">*</span>pi<span class="token punctuation">;</span>
            <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> <span class="token operator">*</span>pic <span class="token operator">=</span> <span class="token operator">&amp;</span>i<span class="token punctuation">;</span>
            pi <span class="token operator">=</span> pic<span class="token punctuation">;</span>   <span class="token comment">// Not allowed</span>
         it is like<span class="token punctuation">,</span> breaking an agreement

      <span class="token number">6.</span><span class="token string">&quot;const in function arguments&quot;</span>
         <span class="token string">&quot;must be added at both function declaration and definition&quot;</span>
</pre><h2 class="mume-header" id="03-advanced-class">03. advanced class</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span><span class="token string">&quot;this&quot;</span>
      <span class="token string">&quot;this&quot;</span> is the automatically generated pointer pointing at the things I use to call the function
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
               <span class="token keyword keyword-int">int</span> a<span class="token punctuation">;</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> aa<span class="token punctuation">)</span><span class="token punctuation">{</span>
                  <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span>a <span class="token operator">=</span> aa<span class="token punctuation">;</span> <span class="token comment">// the same as a = aa;</span>
               <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
      <span class="token string">&quot;used to resolve name conflict&quot;</span>
         <span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> height<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
            <span class="token comment">// this-&gt;height: data member</span>
            <span class="token comment">// height: parameter</span>
         <span class="token punctuation">}</span>

         <span class="token keyword keyword-class">class</span> <span class="token class-name">Number</span><span class="token punctuation">{</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
            <span class="token keyword keyword-int">int</span> n<span class="token punctuation">;</span>
         <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
            <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span>n <span class="token operator">=</span> n<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            Number <span class="token function">add1</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Number<span class="token operator">&amp;</span> number<span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span>
            <span class="token comment">// this first const: protecting the parameter</span>
            <span class="token comment">// this second const: protecting the data member</span>
            <span class="token punctuation">{</span>
               <span class="token keyword keyword-int">int</span> result <span class="token operator">=</span> n <span class="token operator">+</span> number<span class="token punctuation">.</span>n<span class="token punctuation">;</span> <span class="token comment">// this is not protected by private</span>
               Number <span class="token function">new_number</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-return">return</span> new_number<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>

      <span class="token string">&quot;we can access the private data of another object in the member function of the same class&quot;</span>
         <span class="token keyword keyword-int">int</span> result <span class="token operator">=</span> n <span class="token operator">+</span> number<span class="token punctuation">.</span>n<span class="token punctuation">;</span>
            <span class="token comment">// in member function of class Number</span>

   <span class="token number">2.</span><span class="token string">&quot;class object initialization&quot;</span>
      <span class="token number">1.</span><span class="token string">&quot;{} initializer&quot;</span>
         <span class="token keyword keyword-if">if</span> all data members are <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
            <span class="token keyword keyword-class">class</span> <span class="token class-name">Word</span>
            <span class="token punctuation">{</span>
               <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                  <span class="token keyword keyword-int">int</span> frequency<span class="token punctuation">;</span>
                  <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> str<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
         you can use<span class="token operator">:</span>
            Word movie <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Titanic&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         after C<span class="token operator">++</span> <span class="token number">11</span><span class="token punctuation">,</span> also<span class="token operator">:</span>
            Word movie <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Titanic&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-if">if</span> the number of elements in the brace<span class="token operator">-</span>enclosed initializer list is less than number of <span class="token keyword keyword-public">public</span> data members<span class="token operator">:</span>
            the other ones will be initialized with <span class="token number">0</span>
         can <span class="token operator">not</span> be used <span class="token keyword keyword-if">if</span><span class="token operator">:</span>
            <span class="token number">1.</span> there are user<span class="token operator">-</span>defined constructors
            <span class="token number">2.</span> some data members are <span class="token keyword keyword-private">private</span>

      <span class="token number">2.</span><span class="token string">&quot;constructors&quot;</span>
         <span class="token number">0.</span><span class="token string">&quot;summary&quot;</span>
            <span class="token number">1.</span> <span class="token keyword keyword-default">default</span> constructor
               nothing
            <span class="token number">2.</span> type conversion constructor
               <span class="token operator">=</span> <span class="token function">or</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>

    
         <span class="token number">1.</span><span class="token string">&quot;default constructor&quot;</span>
            <span class="token string">&quot;input nothing&quot;</span>
               <span class="token class-name">X</span><span class="token double-colon punctuation">::</span><span class="token function">X</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>&#x2026;&#x2026;<span class="token punctuation">}</span>
               <span class="token class-name">X</span><span class="token double-colon punctuation">::</span><span class="token function">X</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> b <span class="token operator">=</span> <span class="token number">3.4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>&#x2026;&#x2026;<span class="token punctuation">}</span>
            <span class="token keyword keyword-if">if</span> <span class="token operator">not</span> defined<span class="token punctuation">,</span> it will generate a <span class="token keyword keyword-default">default</span> constructor<span class="token punctuation">,</span> which is empty
               i<span class="token punctuation">.</span>e<span class="token punctuation">.</span> <span class="token class-name">X</span><span class="token double-colon punctuation">::</span><span class="token function">X</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
                  <span class="token string">&quot;this is automatically generated if and only if you don&apos;t have any constructor&quot;</span>
                  &quot;once you have a constructor<span class="token punctuation">,</span> 
                     even <span class="token keyword keyword-if">if</span> <span class="token operator">not</span> <span class="token keyword keyword-default">default</span> constructor<span class="token punctuation">,</span> 
                     <span class="token keyword keyword-this">this</span> will <span class="token operator">not</span> be automatically generated&quot;
    
         <span class="token number">2.</span><span class="token string">&quot;type conversion constructor&quot;</span>
            <span class="token operator">=</span> <span class="token function">or</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            converting <span class="token string">&quot;one&quot;</span> variable <span class="token string">&quot;(int, string etc.)&quot;</span> into object
               <span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-char">char</span> c<span class="token punctuation">)</span> 
               <span class="token punctuation">{</span>
                  frequency <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
                  str <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-char">char</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
                  str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span> 
                  str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&apos;\0&apos;</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
               <span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-char">char</span> c<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> k <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> 
               <span class="token punctuation">{</span>
                  frequency <span class="token operator">=</span> k<span class="token punctuation">;</span> 
                  str <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-char">char</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
                  str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span> 
                  str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&apos;\0&apos;</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
            <span class="token string">&quot;implicit&quot;</span>
               <span class="token operator">=</span> 
                  <span class="token string">&quot;the &quot;</span><span class="token operator">=</span><span class="token string">&quot; has nothing to do with assignment&quot;</span>
               <span class="token string">&quot;more expensive&quot;</span>
            <span class="token string">&quot;explicit&quot;</span>
               <span class="token keyword keyword-new">new</span> <span class="token function">Word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token string">&quot;less expensive&quot;</span>
    
            implicit conversion by surprise
               <span class="token number">1.</span>
                  <span class="token class-name">Word</span><span class="token double-colon punctuation">::</span><span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span>s<span class="token punctuation">)</span>
                  <span class="token punctuation">{</span>
                     frequency <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> str <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-char">char</span><span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token function">strcpy</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>
                  <span class="token keyword keyword-void">void</span> <span class="token function">print_word</span><span class="token punctuation">(</span>Word x<span class="token punctuation">)</span> <span class="token punctuation">{</span>x<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
                  <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">print_word</span><span class="token punctuation">(</span><span class="token string">&quot;Titanic&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
                     <span class="token string">&quot;this will work&quot;</span>
                     <span class="token keyword keyword-void">void</span> <span class="token function">print_word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Word<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>x<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token string">&quot;will also work&quot;</span>   <span class="token string">&quot;test and run&quot;</span>
                        it will automatically call the implicit converter 
                           <span class="token class-name">Word</span><span class="token double-colon punctuation">::</span><span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span>s<span class="token punctuation">)</span>
                        to stop <span class="token keyword keyword-this">this</span> feature<span class="token operator">:</span>
                           <span class="token keyword keyword-explicit">explicit</span> <span class="token class-name">Word</span><span class="token double-colon punctuation">::</span><span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span>s<span class="token punctuation">)</span>
                           <span class="token string">&quot;in this way, &quot;</span><span class="token operator">=</span><span class="token string">&quot; construction is not allowed&quot;</span>
               <span class="token number">2.</span>
                  Word x<span class="token punctuation">;</span>
                  x <span class="token operator">=</span> <span class="token string">&quot;Titanic&quot;</span><span class="token punctuation">;</span>
                     <span class="token string">&quot;this will work if and only if operator= is defined&quot;</span>
                        it will automatically call the implicit converter <span class="token operator">and</span> create a poor guy
                           <span class="token class-name">Word</span><span class="token double-colon punctuation">::</span><span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span>s<span class="token punctuation">)</span>
                        then<span class="token punctuation">,</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span> will be runned
                        then<span class="token punctuation">,</span> the poor guy will be destructed
   
            the use of <span class="token keyword keyword-explicit">explicit</span> keyword<span class="token operator">:</span>
               to stop unexpected behavior
               to make it less expensive
         <span class="token number">3.</span><span class="token string">&quot;copy constructor&quot;</span>
            Word array2 <span class="token operator">=</span> array1<span class="token punctuation">;</span>  <span class="token comment">// implicit</span>
            Word <span class="token function">array2</span><span class="token punctuation">(</span>array1<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// explicit</span>
            Word array2<span class="token punctuation">{</span>array<span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment">// explicit</span>

            the use of <span class="token keyword keyword-explicit">explicit</span> keyword<span class="token operator">:</span>
               same as conversion constructor

            <span class="token string">&quot;Return value optimization (RVO)&quot;</span>
               will avoid creating poor guy
               to stop optimization<span class="token operator">:</span>
                  <span class="token string">&quot;-fno-elode-constructors&quot;</span>
               e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
                  <span class="token keyword keyword-class">class</span> <span class="token class-name">Word</span>
                  <span class="token punctuation">{</span>
                     <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
                        <span class="token comment">// storing a char[]</span>
                     <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                        <span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span> <span class="token operator">*</span>s<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/*converting: from char to Word object*/</span><span class="token punctuation">}</span>
                        <span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Word <span class="token operator">&amp;</span>w<span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token comment">/*copy*/</span><span class="token punctuation">}</span>
                        <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> frequency <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
                        Word <span class="token function">to_upper_case</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span>
                        <span class="token punctuation">{</span>
                           Word <span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword keyword-this">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                           <span class="token comment">// do something</span>
                           <span class="token keyword keyword-return">return</span> x<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                  <span class="token punctuation">{</span>
                     Word <span class="token function">movie</span><span class="token punctuation">(</span><span class="token string">&quot;titanic&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     Word song <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">to_upper_case</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>
               without RVO<span class="token operator">:</span>
                  copy constructor will be called at<span class="token operator">:</span>
                     Word <span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword keyword-this">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment">// direct call</span>
                     <span class="token keyword keyword-return">return</span> x<span class="token punctuation">;</span>                              <span class="token comment">// creating a poor guy</span>
                     Word song <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">to_upper_case</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// using copy constructor to create song</span>
               with RVO<span class="token operator">:</span>
                  copy constructor will only be called at<span class="token operator">:</span>
                     Word <span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword keyword-this">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment">// direct call</span>
            <span class="token function">class_name</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> class_name<span class="token operator">&amp;</span> object_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token string">&quot;&amp;&quot;</span>
               save memory
               without <span class="token keyword keyword-this">this</span><span class="token operator">:</span> infinite recursion
                  <span class="token keyword keyword-const">const</span> MyArray arr
                  when passing<span class="token punctuation">,</span> becomes<span class="token operator">:</span>
                  <span class="token keyword keyword-const">const</span> MyArray arr <span class="token operator">=</span> arr1<span class="token punctuation">;</span>
                  <span class="token keyword keyword-this">this</span> will call the copy constructor again
                  <span class="token operator">and</span> <span class="token keyword keyword-this">this</span> will be done recursively
                  therefore<span class="token punctuation">,</span> <span class="token keyword keyword-this">this</span> is forbidden
                     <span class="token string">&quot;compilation error&quot;</span>
            <span class="token string">&quot;const&quot;</span>
               to avoid changing the object passed to the function
            <span class="token string">&quot;default copy constructor&quot;</span>
               <span class="token keyword keyword-if">if</span> we <span class="token keyword keyword-do">do</span> <span class="token operator">not</span> define a <span class="token string">&quot;copy constructor&quot;</span>
                  a <span class="token keyword keyword-default">default</span> copy constructor will be automatically generated
                  <span class="token string">&quot;even if we have other constructors&quot;</span>
                  it will <span class="token keyword keyword-do">do</span> <span class="token string">&quot;shallow copy&quot;</span> <span class="token punctuation">(</span>memberwise copy<span class="token punctuation">)</span>
                     <span class="token string">&quot;works well for array&quot;</span>

               <span class="token keyword keyword-class">class</span> <span class="token class-name">MyArray</span><span class="token punctuation">{</span>
                  <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
                     <span class="token keyword keyword-int">int</span><span class="token operator">*</span> p<span class="token punctuation">;</span>
                     <span class="token keyword keyword-int">int</span> n<span class="token punctuation">;</span>
                  <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                     <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        p <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-int">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
                        <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span>n <span class="token operator">=</span> n<span class="token punctuation">;</span>
                     <span class="token punctuation">}</span>
                     <span class="token comment">// copy constructor, shallow</span>
                     <span class="token comment">// if we do not define a copy constructor, </span>
                     <span class="token comment">//    c++ will automatically generate a constructor just like this</span>
                     <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> MyArray<span class="token operator">&amp;</span> arr<span class="token punctuation">)</span>   <span class="token comment">// reference to arr</span>
                     <span class="token punctuation">{</span>
                        p <span class="token operator">=</span> arr<span class="token punctuation">.</span>p<span class="token punctuation">;</span>  <span class="token comment">// pointing to the same array, shallow copy</span>
                        n <span class="token operator">=</span> arr<span class="token punctuation">.</span>n
                     <span class="token punctuation">}</span>
                     <span class="token comment">// copy constructor, deep</span>
                     <span class="token comment">// have to be defined by user</span>
                     <span class="token comment">// if a user-defined copy constructor is defined</span>
                     <span class="token comment">//    c++ will not generate a default copy constructor any more</span>
                     <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> MyArray<span class="token operator">&amp;</span> arr<span class="token punctuation">)</span>   <span class="token comment">// reference to arr</span>
                     <span class="token punctuation">{</span>
                        n <span class="token operator">=</span> arr<span class="token punctuation">.</span>n
                        p <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-int">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
                        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                        <span class="token punctuation">{</span>
                           p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                        <span class="token punctuation">}</span>
                     <span class="token punctuation">}</span>   
               <span class="token punctuation">}</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                  MyArray <span class="token function">array1</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  MyArray array2 <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
            <span class="token string">&quot;default memberwise assignment&quot;</span>
               Unless you redefine the assignment <span class="token keyword keyword-operator">operator</span> <span class="token string">&quot;=&quot;</span> <span class="token keyword keyword-for">for</span> a <span class="token string">&quot;class&quot;</span>
               the compiler generates the <span class="token keyword keyword-default">default</span> assignment <span class="token keyword keyword-operator">operator</span> function 
               <span class="token string">&quot;memberwise assignment&quot;</span> <span class="token keyword keyword-for">for</span> it
                  <span class="token string">&quot;works well for array&quot;</span>

               Different from the <span class="token keyword keyword-default">default</span> copy constructor<span class="token punctuation">,</span> the <span class="token keyword keyword-default">default</span> assignment
                  <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span> will perform memberwise assignment by calling the
                  assignment <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span> of each data member
                     <span class="token string">&quot;the = for object definition is not assignment&quot;</span>

         <span class="token number">4.</span><span class="token string">&quot;member initializer list MIL&quot;</span>
            syntex<span class="token operator">:</span>
               <span class="token operator">:</span> <span class="token function">member1</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">member2</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            <span class="token string">&quot;creating and initialzing data member at the same time&quot;</span>
            <span class="token string">&quot;higher priority than default value&quot;</span>
            key reason why<span class="token operator">:</span>
               <span class="token string">&quot;At the time you enter {} of constructor, all the data member has ALREADY been created&quot;</span>
            <span class="token keyword keyword-class">class</span> <span class="token class-name">Haha</span><span class="token punctuation">{</span>
               <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
                  <span class="token keyword keyword-int">int</span> a<span class="token punctuation">;</span>
                  <span class="token keyword keyword-int">int</span> b<span class="token punctuation">;</span>
                  <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> c <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> hoho <span class="token operator">=</span> hehe<span class="token punctuation">;</span>
               <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                  <span class="token function">Haha</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> bb<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> <span class="token operator">&amp;</span>haha<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">a</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">b</span><span class="token punctuation">(</span>bb<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">hoho</span><span class="token punctuation">(</span>haha<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            the variable <span class="token function">inside</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">:</span>
               refer to <span class="token string">&quot;parameter&quot;</span> <span class="token operator">or</span> <span class="token string">&quot;global variable&quot;</span>
            Why MIL<span class="token operator">?</span>
               <span class="token number">1.</span>to resolve name conflict
                  <span class="token function">a</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    <span class="token comment">// this-&gt;a = a</span>
                  a<span class="token punctuation">{</span>a<span class="token punctuation">}</span>
                  <span class="token function">b</span><span class="token punctuation">(</span>bb<span class="token punctuation">)</span>
                  b<span class="token punctuation">{</span>bb<span class="token punctuation">}</span>
               <span class="token number">2.</span>to initialize <span class="token keyword keyword-const">const</span> data member
                  <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token comment">// will overwrite the default value const int c = 20;</span>
                  <span class="token function">c</span><span class="token punctuation">(</span>bb<span class="token punctuation">)</span>
                  <span class="token string">&quot;if you do not assign default value for const data member&quot;</span>
                     <span class="token string">&quot;then there will be compilation error if one of your constructor does not initialize it with MIL&quot;</span>
               <span class="token number">3.</span>to initialize reference variable

               <span class="token number">4.</span>to specify the constructor <span class="token keyword keyword-for">for</span> data member objects <span class="token operator">and</span> <span class="token string">&quot;base class&quot;</span>
                  <span class="token function">hoho</span><span class="token punctuation">(</span>haha<span class="token punctuation">)</span>  <span class="token comment">// conversion constructor</span>
                  <span class="token function">hoho</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment">// default constructor</span>
                  <span class="token string">&quot;if not initialized in MIL, it will be initialized with default constructor&quot;</span>
                     <span class="token string">&quot;remember to check whether default constructor is still available&quot;</span>
                  <span class="token string">&quot;the () can be empty for class, but not for normal variables like int&quot;</span>
                  <span class="token keyword keyword-class">class</span> <span class="token class-name">Word_Pair</span>
                  <span class="token punctuation">{</span>
                     <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
                        Word w1<span class="token punctuation">;</span> Word w2<span class="token punctuation">;</span>
                     <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                        <span class="token function">Word_Pair</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> s1<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> s2<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">w1</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">w2</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
                  <span class="token punctuation">}</span>
                  <span class="token string">&quot;if we write this:&quot;</span>
                  <span class="token function">Word_Pair</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> w1 <span class="token operator">=</span> x<span class="token punctuation">;</span> w2 <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span>
                     <span class="token number">1.</span> initialize w1<span class="token punctuation">,</span> w2 <span class="token keyword keyword-using">using</span> <span class="token keyword keyword-default">default</span> constructor
                     <span class="token number">2.</span> w1 <span class="token operator">=</span> x<span class="token punctuation">;</span>
                        <span class="token keyword keyword-this">this</span> will run the conversion constructor <span class="token keyword keyword-using">using</span> x<span class="token punctuation">,</span> creating a poor guy
                        <span class="token operator">and</span> then pass poor guy to w1 <span class="token keyword keyword-using">using</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span>
                        after that<span class="token punctuation">,</span> destructor is run <span class="token keyword keyword-for">for</span> poor guy
                  <span class="token string">&quot;sequence of contruction&quot;</span>
                     always follow the sequence in data member list
                        <span class="token operator">not</span> following the sequence in MIL
                        MIL only specify how to initialize<span class="token punctuation">,</span> <span class="token operator">not</span> the sequence
               <span class="token number">5.</span>delegating constructor
                  <span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Word<span class="token operator">&amp;</span> w<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Word</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span>str<span class="token punctuation">,</span> w<span class="token punctuation">.</span>frequency<span class="token punctuation">)</span>
                  <span class="token comment">// will make use of:</span>
                     <span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> f <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
         <span class="token number">5.</span>defaults
            <span class="token string">&quot;compiler generated:&quot;</span>
            <span class="token number">1.</span><span class="token keyword keyword-default">default</span> constructor
               <span class="token comment">// no other constructor are defined</span>
            <span class="token number">2.</span><span class="token keyword keyword-default">default</span> copy constructor
               <span class="token comment">// no other copy constructor is defined</span>
            <span class="token number">3.</span><span class="token keyword keyword-default">default</span> <span class="token punctuation">(</span>copy<span class="token punctuation">)</span> assignment <span class="token keyword keyword-operator">operator</span> function   <span class="token comment">// (operator =)</span>
            <span class="token number">4.</span><span class="token keyword keyword-default">default</span> move <span class="token function">constructor</span> <span class="token punctuation">(</span>std<span class="token operator">=</span>c<span class="token operator">++</span><span class="token number">11</span><span class="token punctuation">)</span>
            <span class="token number">5.</span><span class="token keyword keyword-default">default</span> move assignment <span class="token keyword keyword-operator">operator</span> <span class="token function">function</span> <span class="token punctuation">(</span>std<span class="token operator">=</span>c<span class="token operator">++</span><span class="token number">11</span><span class="token punctuation">)</span>
            <span class="token number">6.</span><span class="token keyword keyword-default">default</span> destructor
            <span class="token string">&quot;=default; =delete&quot;</span>
            <span class="token function">Word</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token keyword keyword-default">default</span><span class="token punctuation">;</span>  <span class="token comment">// Still want the simple default constructor</span>
            <span class="token function">Word</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Word<span class="token operator">&amp;</span> w<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token keyword keyword-delete">delete</span><span class="token punctuation">;</span>  <span class="token comment">// Do not want the default copy constructor</span>
            <span class="token comment">// only for outsiders</span>
            <span class="token string">&quot;listen again?&quot;</span>
            <span class="token number">1.</span><span class="token operator">=</span><span class="token keyword keyword-default">default</span>
               Sill want the <span class="token string">&quot;compiler generated constructors&quot;</span> <span class="token keyword keyword-if">if</span> we have already defined a user<span class="token operator">-</span>defined constructor
               Can be used even <span class="token keyword keyword-if">if</span> it is going to generate one
                  <span class="token string">&quot;improve readability&quot;</span>
            <span class="token number">2.</span><span class="token operator">=</span><span class="token keyword keyword-delete">delete</span>
               Do <span class="token operator">not</span> want the <span class="token string">&quot;compiler generated constructor&quot;</span>
               Can be used even <span class="token keyword keyword-if">if</span> it is <span class="token operator">not</span> going to generate one
                  <span class="token string">&quot;improve readability&quot;</span>

            <span class="token string">&quot;if a class does not have pointer&quot;</span>
               no need to define<span class="token operator">:</span>
                  <span class="token number">1.</span>copy constructor
                  <span class="token number">2.</span>destructor
                  <span class="token number">3.</span><span class="token keyword keyword-operator">operator</span><span class="token operator">=</span>
   <span class="token number">3.</span><span class="token string">&quot;more about = {} ()&quot;</span>
      <span class="token string">&quot;normal local and global variables&quot;</span>
         <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span>
      <span class="token string">&quot;class data member&quot;</span>
         <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span>
      Word word1 <span class="token operator">=</span> word2<span class="token punctuation">;</span>
         copy constructor<span class="token punctuation">,</span> <span class="token operator">not</span> assignment
      Word <span class="token function">w</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         This is a function prototype
         This will <span class="token operator">not</span> call <span class="token keyword keyword-default">default</span> constructor
      <span class="token keyword keyword-using">using</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> is much safer
         Word w<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">// this will call default constructor</span>
   <span class="token number">4.</span><span class="token string">&quot;function overloading&quot;</span>
      same name<span class="token punctuation">,</span> different parameter type
      <span class="token string">&quot;exceptions&quot;</span>
         <span class="token keyword keyword-const">const</span> <span class="token operator">and</span> non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> functions
         <span class="token keyword keyword-const">const</span> object<span class="token operator">:</span> calling the <span class="token keyword keyword-const">const</span> functions
         non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> object<span class="token operator">:</span> calling the non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> functions
      <span class="token keyword keyword-default">default</span> values
         either at declaration <span class="token operator">or</span> definition<span class="token punctuation">,</span> <span class="token string">&quot;not both!&quot;</span>
            usually put at declaration in <span class="token punctuation">.</span>h file
   <span class="token number">6.</span>memory layout
      <span class="token keyword keyword-static">static</span><span class="token operator">:</span>
         stack
         deleting a <span class="token keyword keyword-static">static</span> object will cause runtime error
            <span class="token string">&quot;double delete error&quot;</span>
         <span class="token string">&quot;test and run?&quot;</span>
      dynamic<span class="token operator">:</span>
         heap
      <span class="token string">&quot;do not forget [] when deleting dynamic array&quot;</span>
      <span class="token keyword keyword-double">double</span> deallocation<span class="token operator">:</span>
         <span class="token punctuation">{</span> 
            Word <span class="token function">bug</span><span class="token punctuation">(</span><span class="token string">&quot;bug&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            x <span class="token operator">=</span> bug<span class="token punctuation">;</span> <span class="token comment">// memberwise copy</span>
         <span class="token punctuation">}</span>
         out of scope<span class="token operator">:</span>
            bug killed
            pointer deallocated<span class="token punctuation">;</span>
            when killing x<span class="token operator">:</span>
               pointer deallocated again<span class="token punctuation">;</span>
   <span class="token number">7.</span><span class="token string">&quot;has/own&quot;</span>
      <span class="token string">&quot;has a&quot;</span> relationship
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Tail</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
               Tail t<span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token comment">// Person has a Tail</span>
         <span class="token string">&quot;this is not good, because this is meaningless&quot;</span>
      <span class="token string">&quot;owns a&quot;</span> relationship
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Tail</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
               Tail<span class="token operator">*</span> t<span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token comment">// Person owns a Tail</span>
         <span class="token comment">// don&apos;t have when born</span>


   <span class="token number">8.</span>sequence of construction <span class="token operator">and</span> destruction
      <span class="token number">1.</span>before entering the constructor<span class="token operator">:</span> <span class="token string">&apos;{&apos;</span>
         initializing all the data members
            <span class="token string">&quot;in the sequence of data member list&quot;</span>
            <span class="token operator">not</span> MIL
      <span class="token number">2.</span>nothing done before entering destructor
         before leaving destructor <span class="token string">&apos;}&apos;</span>
            deallocating all the data members
            <span class="token string">&quot;in the reverse sequence of data member list&quot;</span>
         the reverse order of construction <span class="token string">&quot;(for static)&quot;</span>
      <span class="token string">&quot;remember to check MIL to see how to construct&quot;</span>
   <span class="token number">9.</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Student</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Person</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token string">&quot;public?&#x5F00;&#x5934;&quot;</span>
      All member function <span class="token operator">and</span> all data member of <span class="token string">&quot;class Person&quot;</span> will be added to <span class="token string">&quot;class Student&quot;</span>
         Except the <span class="token string">&quot;constructors&quot;</span> <span class="token operator">and</span> <span class="token string">&quot;destructors&quot;</span>
            All the other things<span class="token punctuation">,</span> including <span class="token string">&quot;operator=&quot;</span><span class="token punctuation">,</span> will be grabbed
      To initialize the data member from <span class="token string">&quot;class Person&quot;</span><span class="token operator">:</span>
         You are <span class="token operator">not</span> allowed to initialzed with constructor of <span class="token string">&quot;class Student&quot;</span>
         It must be done with constructor of <span class="token string">&quot;class Person&quot;</span>
            Called <span class="token keyword keyword-using">using</span> <span class="token string">&quot;MIL&quot;</span>
            If there are other things in MIL<span class="token punctuation">,</span> data member from <span class="token string">&quot;class Person&quot;</span> will always be intialized first
               <span class="token string">&quot;Regardless of the sequence in MIL&quot;</span>
      <span class="token string">&quot;Uses of MIL&quot;</span>
         <span class="token number">1.</span>to resolve name conflict
         <span class="token number">2.</span>to initialize <span class="token keyword keyword-const">const</span> data member
         <span class="token number">3.</span>to initialize reference variable
         <span class="token number">4.</span>to specify the constructor <span class="token keyword keyword-for">for</span> data member objects
         <span class="token number">5.</span>delegating constructor
         <span class="token number">6.</span>to initialize the data member inheritaged
            <span class="token keyword keyword-if">if</span> skipped<span class="token operator">:</span> an MIL of <span class="token keyword keyword-default">default</span> constructor will be added by C<span class="token operator">++</span>
   <span class="token number">10.f</span>eatures of OOP<span class="token operator">:</span>
      <span class="token string">&quot;class&quot;</span>
      <span class="token string">&quot;object&quot;</span>
      <span class="token string">&quot;inheritance&quot;</span>
      <span class="token string">&quot;polymorphism / lizkov&quot;</span>
      <span class="token string">&quot;dynamic binding&quot;</span>
   <span class="token number">11.</span>inheritance
      <span class="token keyword keyword-if">if</span> there are some code replicated<span class="token operator">:</span>
         <span class="token keyword keyword-if">if</span> we use copy <span class="token operator">and</span> paste<span class="token operator">:</span>
            error <span class="token function">pron</span> <span class="token punctuation">(</span>hard to fix errors<span class="token punctuation">)</span>
      good practice<span class="token operator">:</span>
         use syntex to reuse
      e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         UPerson<span class="token operator">:</span> name<span class="token punctuation">,</span> dept  <span class="token comment">// replicated members</span>
         Student<span class="token operator">:</span> GPA<span class="token punctuation">,</span> course_enrolled<span class="token punctuation">,</span> num_courses<span class="token punctuation">;</span> Teacher<span class="token operator">:</span> rank<span class="token punctuation">,</span> research_area<span class="token punctuation">;</span>
      Terminology
         UPerson<span class="token operator">:</span> <span class="token string">&quot;Base class&quot;</span><span class="token punctuation">(</span>C<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token string">&quot;Super class&quot;</span><span class="token punctuation">(</span>Java<span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token string">&quot;Parent class&quot;</span>
         Teacher<span class="token operator">:</span> <span class="token string">&quot;Derived class&quot;</span><span class="token punctuation">(</span>C<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token string">&quot;Sub class&quot;</span><span class="token punctuation">(</span>Java<span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token string">&quot;Child class&quot;</span>
      
      <span class="token string">&quot;Derived class&quot;</span> can call <span class="token string">&quot;base class&apos;s&quot;</span> member function
      <span class="token string">&quot;Base class&quot;</span> can <span class="token operator">not</span> call <span class="token string">&quot;derived class&apos;s&quot;</span> member function
      
      <span class="token string">&quot;Derived class&quot;</span> can <span class="token operator">not</span> directly access <span class="token string">&quot;base class&apos;s&quot;</span> <span class="token keyword keyword-private">private</span> data

      <span class="token string">&quot;Polymophic/liskov substitution principle&quot;</span>
         <span class="token string">&quot;Parent class&quot;</span> pointer can point to <span class="token string">&quot;child class&quot;</span>
         <span class="token string">&quot;Child class&quot;</span> pointer can <span class="token operator">not</span> point to <span class="token string">&quot;parent class&quot;</span>    <span class="token comment">// impolite</span>
         <span class="token string">&quot;Parent class&quot;</span> reference can bond to <span class="token string">&quot;child class&quot;</span>
         <span class="token string">&quot;Child class&quot;</span> reference can <span class="token operator">not</span> bond to <span class="token string">&quot;parent class&quot;</span>   <span class="token comment">// impolite</span>
         in general<span class="token operator">:</span>
            Parent xx <span class="token operator">=</span> Child xx <span class="token comment">// allowed</span>
            Child xx <span class="token operator">=</span> Parent xx <span class="token comment">// not allowed</span>
         However<span class="token punctuation">,</span> even <span class="token keyword keyword-if">if</span> a <span class="token string">&quot;Parent class&quot;</span> pointer is pointing at a <span class="token string">&quot;child class object&quot;</span>
            it can <span class="token string">&quot;only&quot;</span> access data member <span class="token operator">and</span> member function that is available to
               <span class="token string">&quot;parent class objects&quot;</span>
         Good use<span class="token operator">:</span> reusing functions
            <span class="token string">&quot;Function Expecting an Argument of Type&quot;</span>        <span class="token string">&quot;Will also accept&quot;</span>
            Parent                                          Child
            pointer to parent                               pointer to student
            parent reference                                child reference

            Overload
               <span class="token keyword keyword-void">void</span> <span class="token function">print_label</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Parent<span class="token operator">&amp;</span> parent<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>  <span class="token comment">// No.1</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">print_label</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Child<span class="token operator">&amp;</span> child<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>    <span class="token comment">// No.2</span>
               <span class="token comment">// in main:</span>
               Child <span class="token function">tom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">print_label</span><span class="token punctuation">(</span>tom<span class="token punctuation">)</span><span class="token punctuation">;</span>      
                  <span class="token comment">// this will call No.2</span>
                  <span class="token string">&quot;Perfect match&quot;</span>
               Parent<span class="token operator">&amp;</span> tom2 <span class="token operator">=</span> tom<span class="token punctuation">;</span> <span class="token function">print_label</span><span class="token punctuation">(</span>tom2<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment">// this will call No.1</span>
                  <span class="token string">&quot;Cannot call child member functions&quot;</span>
                  <span class="token punctuation">(</span>only care about type of tom2<span class="token punctuation">)</span>
         
         sequence of construction <span class="token operator">and</span> destruction
            Construction<span class="token operator">:</span>
               In the sequence from grannest parent to child
               To specify the constructor <span class="token keyword keyword-for">for</span> parent<span class="token punctuation">,</span> use MIL
                  If no MIL specified<span class="token punctuation">,</span> C<span class="token operator">++</span> will automatically generate an MIL calling the <span class="token keyword keyword-default">default</span> constructor
                  <span class="token string">&quot;Such MIL will construct parent first, then construct data members&quot;</span>
            Destruction<span class="token operator">:</span>
               In the reverse order of construction <span class="token string">&quot;unless it is a dynamic object&quot;</span>
         slicing
            copying <span class="token string">&quot;object&quot;</span> 
               <span class="token operator">not</span> <span class="token string">&quot;object pointer&quot;</span> <span class="token operator">or</span> <span class="token string">&quot;object reference&quot;</span>
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
               Parent parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
                  <span class="token comment">// calling copy constructor of Parent (Liskov)</span>
               parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
            in these cases<span class="token punctuation">,</span> some data members are lost
      data member name conflict
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token keyword keyword-int">int</span> a<span class="token punctuation">;</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;very happy&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">B</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">A</span></span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
               <span class="token keyword keyword-int">int</span> a<span class="token punctuation">;</span>   <span class="token comment">// this is allowed</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;not so happy&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token class-name">A</span><span class="token double-colon punctuation">::</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
                  <span class="token comment">// A::print() in print -&gt; overriding</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
               <span class="token punctuation">{</span>
                  a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>  <span class="token comment">// the a of B</span>
                  A<span class="token double-colon punctuation">::</span>a <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>  <span class="token comment">// the a of A</span>
               <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            B obj<span class="token punctuation">;</span>
            obj<span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// f() in B (not so happy)</span>
            obj<span class="token punctuation">.</span><span class="token class-name">A</span><span class="token double-colon punctuation">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// f() in A (very happy)</span>
         <span class="token punctuation">}</span>
      access control
         <span class="token number">1.</span><span class="token string">&quot;protected&quot;</span>
            <span class="token string">&quot;child class&quot;</span> cannot access <span class="token string">&quot;private&quot;</span> data member of parents<span class="token punctuation">,</span> but can access <span class="token string">&quot;protected&quot;</span> data members
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
            <span class="token keyword keyword-class">class</span> <span class="token class-name">UPerson</span>
            <span class="token punctuation">{</span>
               <span class="token keyword keyword-protected">protected</span><span class="token operator">:</span>  <span class="token comment">// can be accessed in derived classes</span>
                  string name<span class="token punctuation">;</span>
                  Department dept<span class="token punctuation">;</span>
               <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                  <span class="token function">UPerson</span><span class="token punctuation">(</span>string n<span class="token punctuation">,</span> Department d<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">name</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dept</span> <span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-if">if</span> there are <span class="token keyword keyword-protected">protected</span> data members<span class="token operator">:</span>
               you are encouraged to inherit
            <span class="token keyword keyword-if">if</span> the <span class="token keyword keyword-protected">protected</span> data is of another object
               <span class="token string">&quot;child class&quot;</span> can only access that <span class="token keyword keyword-protected">protected</span> data <span class="token keyword keyword-if">if</span> it is the <span class="token string">&quot;same&quot;</span> <span class="token string">&quot;child class&quot;</span>
         <span class="token number">2.</span><span class="token string">&quot;friend&quot;</span>
            <span class="token keyword keyword-friend">friend</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span><span class="token punctuation">;</span>
               <span class="token comment">// A can be defined later</span>
            <span class="token keyword keyword-if">if</span> A is declared as <span class="token keyword keyword-friend">friend</span> in B<span class="token punctuation">,</span> then A can access all the data members in B <span class="token string">&quot;including private&quot;</span>
               including <span class="token keyword keyword-private">private</span> inherited from B in any child object of B
            such declaring <span class="token keyword keyword-friend">friend</span> can only be made in B<span class="token punctuation">,</span> <span class="token operator">and</span> can be placed anywhere inside <span class="token string">&quot;class B&quot;</span>
               can be under <span class="token keyword keyword-private">private</span><span class="token punctuation">,</span> <span class="token keyword keyword-protected">protected</span> <span class="token operator">or</span> <span class="token keyword keyword-public">public</span>
      <span class="token string">&quot;static/early binding&quot;</span> <span class="token operator">&lt;</span><span class="token operator">-&gt;</span> <span class="token string">&quot;dynamic/late binding&quot;</span>
         <span class="token string">&quot;early&quot;</span>
            when compiling
         <span class="token string">&quot;late&quot;</span>
            during execution
         <span class="token string">&quot;whenever there is a virtual keyword, we use dynamic binding&quot;</span>
            <span class="token string">&quot;only in this way can we decide the function to call&quot;</span>
         <span class="token string">&quot;static binding&quot;</span>
            without <span class="token keyword keyword-virtual">virtual</span> keyword<span class="token punctuation">,</span> then it will only call the member function of its own type
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
               t <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Teacher<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>uperson<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token operator">-&gt;</span>person<span class="token punctuation">;</span>
               <span class="token comment">// UPerson is the parent of Teacher </span>
               <span class="token string">&quot;this will call the print of Teacher&quot;</span>
                  <span class="token string">&quot;this is doable, however, this could be problematic&quot;</span>
                  <span class="token string">&quot;not recommended&quot;</span>
            <span class="token string">&quot;or, you can use ::&quot;</span>
         <span class="token string">&quot;dynamic binding&quot;</span>
            <span class="token string">&quot;binding only happens when overriding is possible&quot;</span>
               <span class="token string">&quot;not possible cases&quot;</span>
                  <span class="token operator">not</span> identical prototype
                     e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>  
                        <span class="token keyword keyword-int">int</span> vs <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span>
                        <span class="token keyword keyword-int">int</span> vs <span class="token keyword keyword-long">long</span>
                        <span class="token keyword keyword-const">const</span> Parent<span class="token operator">&amp;</span> vs <span class="token keyword keyword-const">const</span> Child<span class="token operator">&amp;</span>
                  <span class="token keyword keyword-const">const</span> member function vs non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> member function
                  <span class="token operator">not</span> identical <span class="token keyword keyword-return">return</span> type
                     exceptions<span class="token operator">:</span>
                        reference<span class="token operator">/</span>pointer of the classes of parents <span class="token operator">and</span> childs
            <span class="token keyword keyword-virtual">virtual</span> keyword
               <span class="token string">&quot;only for member function&quot;</span>
               e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
                  <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
                     <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                        <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;f in A&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-class">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>
                     <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                        <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;f in B&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-class">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
                     <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                        <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;f in C&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     A<span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> B<span class="token punctuation">;</span>
                     B<span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> C<span class="token punctuation">;</span>
                     p1<span class="token operator">-&gt;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token string">&quot;this will print out &apos;f in B&apos;&quot;</span>
                     p2<span class="token operator">-&gt;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token string">&quot;this will print out &apos;f in C&apos;&quot;</span>
                     p2<span class="token operator">-&gt;</span><span class="token class-name">A</span><span class="token double-colon punctuation">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token string">&quot;this will print out &apos;f in A&apos;&quot;</span>
                  <span class="token punctuation">}</span>
               when there is <span class="token keyword keyword-virtual">virtual</span><span class="token punctuation">,</span>
                  it will call the function of the object it is pointing to
               when there is a <span class="token keyword keyword-virtual">virtual</span> in a member function of a <span class="token string">&quot;base class&quot;</span><span class="token punctuation">,</span>
                  all the same<span class="token operator">-</span>prototype function in the <span class="token string">&quot;derived classes&quot;</span><span class="token punctuation">,</span> 
                  including those in its <span class="token string">&quot;grandson class&quot;</span>
                  are all <span class="token keyword keyword-virtual">virtual</span>
                  <span class="token string">&quot;when there is no f() in B&quot;</span>
                     such rules also holds
                     because the <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> in <span class="token string">&quot;A&quot;</span> will be inherited by <span class="token string">&quot;B&quot;</span>
               p<span class="token operator">-&gt;</span><span class="token class-name">A</span><span class="token double-colon punctuation">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token string">&quot;this is static binding&quot;</span>
               e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
                  <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span>
                  <span class="token punctuation">{</span>
                     <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                        <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-class">class</span> <span class="token class-name">B</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">A</span></span>
                  <span class="token punctuation">{</span>
                     <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
                        <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">;</span>

                  <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                     A<span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> B<span class="token punctuation">;</span>
                     B<span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> B<span class="token punctuation">;</span>
                     p1<span class="token operator">-&gt;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token string">&quot;this is doable (it is like a loop hole in C++)&quot;</span>
                     p2<span class="token operator">-&gt;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token string">&quot;this will cause error, it will check the private one first, then check the one inherited&quot;</span>
                  <span class="token punctuation">}</span>
         <span class="token string">&quot;polymorphism&quot;</span>
            <span class="token string">&quot;poly&quot;</span> <span class="token string">&quot;multiple&quot;</span>
            <span class="token string">&quot;morphos&quot;</span> <span class="token string">&quot;shape&quot;</span>
            same name <span class="token operator">+</span> different 
            <span class="token number">1.</span> function overloading
            <span class="token number">2.</span> function overriding
               <span class="token string">&quot;polymorphism in our course means overriding&quot;</span>
               only overriding <span class="token keyword keyword-virtual">virtual</span> function can be called <span class="token keyword keyword-override">override</span>
               overloading<span class="token operator">:</span>
                  during compilation time
               overriding<span class="token operator">:</span>
                  during runtime
            <span class="token number">4.</span> <span class="token keyword keyword-template">template</span>

         <span class="token string">&quot;RTTI(Run-Time Type Information)&quot;</span>
            <span class="token string">&quot;checking the type of object we are pointing at&quot;</span>
            <span class="token number">1.</span> syntex
               <span class="token number">1.</span> remember to
                  <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;typeinfo&gt;</span></span>
               <span class="token number">2.</span> input<span class="token operator">:</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">or</span> <span class="token string">&quot;class&quot;</span>
                  <span class="token string">&quot;remember to dereference when checking type of pointer&quot;</span>
                  <span class="token keyword keyword-typeid">typeid</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// *p: the thing pointed by p</span>
               <span class="token number">3.</span> <span class="token keyword keyword-typeid">typeid</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span>
                     returning a type<span class="token operator">-</span>info object
                  <span class="token keyword keyword-typeid">typeid</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                     will call <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> of type<span class="token operator">-</span>info object
                     will out<span class="token operator">-</span>put
                        <span class="token string">&quot;3Abc&quot;</span> <span class="token operator">or</span> <span class="token string">&quot;Abc&quot;</span>   <span class="token comment">// depending on platform</span>
               <span class="token number">4.</span> <span class="token keyword keyword-typeid">typeid</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword keyword-typeid">typeid</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span>
                  <span class="token comment">// *p is an object, B is a class</span>
                  <span class="token string">&quot;normally, we can not allowed to directly compare two objects&quot;</span>
                  however<span class="token punctuation">,</span> we have <span class="token keyword keyword-operator">operator</span><span class="token operator">==</span> in type<span class="token operator">-</span>info object
            <span class="token number">2.</span> getting the type of object a pointer is pointing to  
               only work when there is <span class="token keyword keyword-virtual">virtual</span> keyword in the <span class="token string">&quot;class of the pointer&quot;</span>
                  <span class="token keyword keyword-else">else</span><span class="token punctuation">,</span> <span class="token keyword keyword-this">this</span> will <span class="token keyword keyword-return">return</span> the type of the pointer<span class="token punctuation">,</span> <span class="token operator">not</span> the type pointer is pointing at
               e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
                  A <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> B<span class="token punctuation">;</span>
                  cout <span class="token operator">&lt;&lt;</span> <span class="token keyword keyword-typeid">typeid</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// *p: the thing pointed by p</span>
                  <span class="token comment">// it will returns an object that carries the type information for us</span>
                  when A does <span class="token operator">not</span> have <span class="token keyword keyword-virtual">virtual</span><span class="token operator">:</span>
                     <span class="token keyword keyword-typeid">typeid</span> will <span class="token keyword keyword-return">return</span> type A
                     <span class="token string">&quot;wrong!&quot;</span>
                  when A has <span class="token keyword keyword-virtual">virtual</span><span class="token operator">:</span>
                     <span class="token keyword keyword-typeid">typeid</span> will <span class="token keyword keyword-return">return</span> type B
                     <span class="token string">&quot;correct!&quot;</span>
         <span class="token string">&quot;dynamic cast&quot;</span>
            Dynamic cast VS Static cast<span class="token operator">:</span>
               Dynamic cast will help you check whether such conversion is doable
               If <span class="token operator">not</span> doable<span class="token punctuation">,</span> it will <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-nullptr">nullptr</span>
               e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
                  A <span class="token operator">*</span>r <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> A<span class="token punctuation">;</span>
                  B <span class="token operator">*</span>s <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>B <span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment">// not doable</span>
                  <span class="token string">&quot;s will be nullptr&quot;</span>
               Doable<span class="token operator">:</span>
                  child pointer to parent pointer
            Dynamic cast rely on type info to work
               but you <span class="token keyword keyword-do">do</span> <span class="token operator">not</span> have to 
                  <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;typeinfo&gt;</span></span>
            If there is no <span class="token keyword keyword-virtual">virtual</span> in A<span class="token punctuation">,</span>
               then <span class="token keyword keyword-dynamic_cast">dynamic_cast</span> will give <span class="token string">&quot;compilation error&quot;</span>
               but <span class="token keyword keyword-typeid">typeid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> will <span class="token operator">not</span> give <span class="token string">&quot;compilation error&quot;</span>
            Use dynamic cast to play safe<span class="token operator">:</span>
               after casting<span class="token operator">:</span>
               <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>ptr <span class="token operator">==</span> <span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">)</span>
         <span class="token string">&quot;override keyword&quot;</span>
            checking whether a function is doing overriding
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
               in <span class="token string">&quot;class A&quot;</span>
               <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               in <span class="token string">&quot;class B&quot;</span> <span class="token punctuation">(</span>child of A<span class="token punctuation">)</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">)</span> <span class="token keyword keyword-override">override</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
               <span class="token comment">// this is not function riding, since prototype does not fit</span>
                  <span class="token string">&quot;will give compilation error&quot;</span>
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
               in <span class="token string">&quot;class A&quot;</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               in <span class="token string">&quot;class B&quot;</span> <span class="token punctuation">(</span>child of A<span class="token punctuation">)</span>
               <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-override">override</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
               <span class="token comment">// this is not function riding, since not virtual</span>
                  <span class="token string">&quot;will give compilation error&quot;</span>
            <span class="token string">&quot;syntex&quot;</span>
               <span class="token keyword keyword-if">if</span> there is also keyword <span class="token keyword keyword-const">const</span><span class="token punctuation">,</span>
                  should be placed as<span class="token operator">:</span>
                     <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-override">override</span>
               only put in <span class="token string">&quot;prototype&quot;</span>
                  <span class="token keyword keyword-do">do</span> <span class="token operator">not</span> place at implementation <span class="token string">&quot;outside class&quot;</span>
         <span class="token string">&quot;when to put virtual?&quot;</span>
            see slide

      <span class="token string">&quot;only to be put in prototype in class&quot;</span>
         <span class="token keyword keyword-explicit">explicit</span>
         <span class="token keyword keyword-override">override</span>
         <span class="token keyword keyword-virtual">virtual</span>
      <span class="token string">&quot;to be placed both&quot;</span>
         <span class="token keyword keyword-const">const</span>
      
      <span class="token string">&quot;Function call within a function&quot;</span>
         is like<span class="token operator">:</span>
            <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token keyword keyword-this">this</span> is the <span class="token keyword keyword-this">this</span> of the function
            <span class="token string">&quot;will be influenced by override&quot;</span>
         However<span class="token punctuation">,</span> such behaviour will <span class="token operator">not</span> happen in constructor <span class="token operator">and</span> destructor
               
      <span class="token string">&quot;interesting thing&quot;</span>
         when calling<span class="token punctuation">,</span> it will check the <span class="token string">&quot;pointer&quot;</span> type <span class="token string">&quot;class&quot;</span> first
            <span class="token keyword keyword-if">if</span> it touches <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> it will seach its child functions

   <span class="token number">12.</span><span class="token string">&quot;ABC&quot;</span>
      <span class="token string">&quot;pure virtual function&quot;</span>
         function without implementation
      <span class="token string">&quot;abstract base class&quot;</span>
         <span class="token string">&quot;class&quot;</span> that has at least one pure <span class="token keyword keyword-virtual">virtual</span> function

         <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
         <span class="token comment">// I am not going to implement this one</span>
         <span class="token string">&quot;remember to put virtual&quot;</span>

      you can use the pointer of <span class="token string">&quot;abstract base class&quot;</span>
      you can use reference of <span class="token string">&quot;abstract base class&quot;</span>
         
      but you can <span class="token operator">not</span> use the <span class="token string">&quot;abstract base class&quot;</span> itself
      you can <span class="token operator">not</span> use <span class="token string">&quot;PBV&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;RBV&quot;</span><span class="token punctuation">,</span> <span class="token keyword keyword-explicit">explicit</span> <span class="token string">&quot;conversion&quot;</span> with <span class="token string">&quot;abstract base class&quot;</span>
         <span class="token string">&quot;explicit conversion ask later&quot;</span>
         you can <span class="token operator">not</span> call pure <span class="token keyword keyword-virtual">virtual</span> function of a constructor <span class="token comment">// or destructor?</span>
      it is possible that we have a destructor <span class="token string">&quot;pure virtual function&quot;</span>
         but it does <span class="token operator">not</span> make sense
         since <span class="token keyword keyword-virtual">virtual</span> destructor must be called


      <span class="token keyword keyword-if">if</span> a <span class="token string">&quot;derived class&quot;</span> also <span class="token keyword keyword-do">do</span> <span class="token operator">not</span> define the <span class="token string">&quot;pure virtual function&quot;</span> in an <span class="token string">&quot;abstract base class&quot;</span>
         then the <span class="token string">&quot;derived class&quot;</span> is also an <span class="token string">&quot;abstract base class&quot;</span>
      <span class="token keyword keyword-if">if</span> a <span class="token string">&quot;derived class&quot;</span> <span class="token keyword keyword-do">do</span> define all the <span class="token string">&quot;pure virtual function&quot;</span>s in an <span class="token string">&quot;abstract base class&quot;</span>
         then the <span class="token string">&quot;derived class&quot;</span> is no longer an <span class="token string">&quot;abstract base class&quot;</span>
            then it is called <span class="token string">&quot;concrete class&quot;</span>
      
      e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Car</span>   
         <span class="token punctuation">{</span>  <span class="token keyword keyword-public">public</span><span class="token operator">:</span>  <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-double">double</span> <span class="token function">getSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">BMW</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Car</span></span>
         <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Benz</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Car</span></span>
         <span class="token punctuation">{</span>  <span class="token keyword keyword-public">public</span><span class="token operator">:</span>  <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-double">double</span> <span class="token function">getSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Toyota</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Car</span></span>
         <span class="token punctuation">{</span>  <span class="token keyword keyword-public">public</span><span class="token operator">:</span>  <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-double">double</span> <span class="token function">getSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         Car<span class="token punctuation">,</span> BMW <span class="token operator">and</span> Benz are both <span class="token string">&quot;abstract base class&quot;</span>
         Toyota is <span class="token operator">not</span> an <span class="token string">&quot;abstract base class&quot;</span><span class="token punctuation">,</span> it is called a <span class="token string">&quot;concrete class&quot;</span>
   <span class="token number">13.</span><span class="token string">&quot;final&quot;</span>
      <span class="token number">1.</span> <span class="token keyword keyword-final">final</span> inheritance
         <span class="token string">&quot;can not inheritage this derived class any more&quot;</span>
      <span class="token keyword keyword-class">class</span> <span class="token class-name">UPerson</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-class">class</span> <span class="token class-name">Student</span> <span class="token keyword keyword-final">final</span><span class="token operator">:</span><span class="token keyword keyword-public">public</span> UPerson<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// This &quot;final&quot; here means no other class can inherit UPerson</span>
      <span class="token keyword keyword-class">class</span> <span class="token class-name">PGstudent</span> <span class="token operator">:</span><span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Student</span></span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// This will cause error, since </span>
      <span class="token number">2.</span> <span class="token keyword keyword-final">final</span> <span class="token keyword keyword-override">override</span>
         <span class="token string">&quot;can not override this function any more&quot;</span>
         <span class="token string">&quot;final works independent of override, but relies on virtual&quot;</span>
      <span class="token comment">// in UPerson</span>
      <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
      <span class="token comment">// in Student</span>
      <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-final">final</span><span class="token punctuation">;</span>
      <span class="token comment">// no other derived class should override print()</span>
      
      <span class="token comment">// in PG_student</span>
      <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-override">override</span><span class="token punctuation">;</span>      
      <span class="token comment">// error</span>
         <span class="token string">&quot;sequence of key word&quot;</span>
            <span class="token keyword keyword-const">const</span> must be at left most
            both okay<span class="token operator">:</span>
               <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-final">final</span>
               <span class="token keyword keyword-final">final</span> <span class="token keyword keyword-override">override</span>
         <span class="token string">&quot;override keyword can be omitted here&quot;</span>
         <span class="token string">&quot;test and run?&quot;</span>


   <span class="token number">14.</span><span class="token string">&quot;is&quot;</span>
      <span class="token string">&quot;is a&quot;</span> relationship
         <span class="token comment">// Teacher is a UPerson</span>
   <span class="token number">15.</span><span class="token string">&quot;virtual destructor&quot;</span>
      <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-virtual">virtual</span> put at parent <span class="token string">&quot;class&quot;</span>
         will go to the destructor of the grannest child
            destruct child <span class="token keyword keyword-using">using</span> child<span class="token number">&apos;</span>s destructor
         after that<span class="token punctuation">,</span> go back to parent<span class="token number">&apos;</span>s destructor
            destruct parent <span class="token keyword keyword-using">using</span> parent<span class="token number">&apos;</span>s destructor
      
      we can also put <span class="token keyword keyword-override">override</span> keyword <span class="token keyword keyword-for">for</span> <span class="token keyword keyword-virtual">virtual</span> destructor
   <span class="token number">16.</span><span class="token string">&quot;friend&quot;</span>
      <span class="token number">0.</span> <span class="token keyword keyword-friend">friend</span> ship
         <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token operator">:</span> declare other as <span class="token keyword keyword-friend">friend</span>
         <span class="token number">1.</span> <span class="token operator">not</span> symmetric
            A <span class="token operator">=</span><span class="token operator">&gt;</span> B
            B <span class="token operator">=</span>\<span class="token operator">=</span><span class="token operator">&gt;</span> A
         <span class="token number">2.</span> <span class="token operator">not</span> transitive
            A <span class="token operator">=</span><span class="token operator">&gt;</span> B <span class="token operator">=</span><span class="token operator">&gt;</span> C
            A <span class="token operator">=</span>\<span class="token operator">=</span><span class="token operator">&gt;</span> C
         <span class="token number">3.</span> <span class="token operator">not</span> inherited
            A <span class="token operator">=</span><span class="token operator">&gt;</span> B
            C derived from B
            A <span class="token operator">=</span>\<span class="token operator">=</span><span class="token operator">&gt;</span> C

      <span class="token number">1.</span> <span class="token keyword keyword-friend">friend</span> function
         <span class="token keyword keyword-friend">friend</span> function is always non<span class="token operator">-</span>member function<span class="token punctuation">,</span> is always global
         <span class="token keyword keyword-friend">friend</span> function can put everywhere in the <span class="token string">&quot;class body&quot;</span><span class="token punctuation">,</span> even can be put under <span class="token keyword keyword-private">private</span>
         <span class="token keyword keyword-friend">friend</span> function can also be a member function from other <span class="token string">&quot;class&quot;</span>
      <span class="token number">2.</span> <span class="token keyword keyword-friend">friend</span> <span class="token string">&quot;class&quot;</span>
         member function of <span class="token keyword keyword-friend">friend</span> <span class="token string">&quot;class&quot;</span> can access all the data members <span class="token operator">and</span> member functions<span class="token punctuation">,</span>
         including the inherited ones
      <span class="token number">3.</span> to declare <span class="token keyword keyword-friend">friend</span> in a <span class="token string">&quot;class template&quot;</span><span class="token punctuation">,</span> has to declare another <span class="token keyword keyword-template">template</span>
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">S</span><span class="token operator">&gt;</span>
      <span class="token number">4.</span> <span class="token keyword keyword-friend">friend</span> function defined in <span class="token string">&quot;class body&quot;</span> are <span class="token keyword keyword-inline">inline</span>
</pre><h2 class="mume-header" id="04-advanced-functions">04. advanced functions</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span><span class="token string">&quot;&#x3BB; expression&quot;</span>
      defining function with no name
         <span class="token keyword keyword-int">int</span> range<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> v <span class="token operator">:</span> range<span class="token punctuation">)</span>  <span class="token comment">// put elements in range to v one by one</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword keyword-return">return</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
         access right
            <span class="token string">&quot;[]&quot;</span>
               <span class="token string">&quot;[]&quot;</span>
                  <span class="token operator">not</span> accessing local variables
               <span class="token string">&quot;[=]&quot;</span>
                  reading but <span class="token operator">not</span> changing all the local variables
               <span class="token string">&quot;[x]&quot;</span>
                  reading x only
                     <span class="token string">&quot;if use read only, we use the value of the local variables when it is initialized&quot;</span>
                     it will <span class="token operator">not</span> change <span class="token keyword keyword-if">if</span> the local variables are changed
               <span class="token string">&quot;[&amp;]&quot;</span>
                  changing all the local variables
               <span class="token string">&quot;[&amp;x]&quot;</span>
                  changing x<span class="token punctuation">,</span> but <span class="token operator">not</span> accessing all the other local variables
                  <span class="token keyword keyword-if">if</span> use <span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">,</span> we use the updated values
               <span class="token string">&quot;[=, &amp;x]&quot;</span>
                  x changable<span class="token punctuation">,</span> others only readable
               <span class="token string">&quot;[&amp;, x]&quot;</span>
                  x only readable<span class="token punctuation">,</span> others changable
               <span class="token string">&quot;[&amp;y, x]&quot;</span>
                  x readable<span class="token punctuation">,</span> y writable 
         input <span class="token function">parameter</span>
            <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> b<span class="token punctuation">)</span>
         function body
            <span class="token punctuation">{</span> xxx <span class="token punctuation">}</span> 
         function <span class="token function">input</span>
            <span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

      saving a &#x3BB; function
         <span class="token keyword keyword-auto">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword keyword-return">return</span> a<span class="token operator">*</span>x<span class="token operator">*</span>x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//calling</span>
         <span class="token string">&quot;auto is not allowed in this course&quot;</span>
      <span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">)</span> <span class="token keyword keyword-mutable">mutable</span> <span class="token punctuation">{</span> <span class="token keyword keyword-return">return</span> b <span class="token operator">*=</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
         <span class="token keyword keyword-this">this</span> is like creating a temporary b
         you can change the temporary b<span class="token punctuation">,</span> but <span class="token operator">not</span> modifying the local variable b
      <span class="token keyword keyword-auto">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">,</span> a<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">)</span> <span class="token keyword keyword-mutable">mutable</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-int">int</span> <span class="token punctuation">{</span>a <span class="token operator">*=</span> x<span class="token punctuation">;</span> b <span class="token operator">+=</span> x<span class="token punctuation">;</span> <span class="token keyword keyword-return">return</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span>
         <span class="token operator">-&gt;</span> <span class="token keyword keyword-int">int</span>
            force it to <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-int">int</span>
            <span class="token string">&quot;if not specified, it will automatically deduce a return type&quot;</span>
         <span class="token keyword keyword-mutable">mutable</span>
            allowing a to be changed
            <span class="token string">&quot;the changeable a is temperary&quot;</span>
   <span class="token number">2.</span><span class="token string">&quot;function pointer&quot;</span>
      e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
      <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span> b<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
         cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
         <span class="token keyword keyword-void">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>fp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         fp <span class="token operator">=</span> f<span class="token punctuation">;</span>
         <span class="token function">fp</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      fp is a function pointer
      the function it points to has to <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-void">void</span>
         <span class="token operator">and</span> must have parameter <span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span>
      <span class="token comment">// can be fp = &amp;f, can be (*fp)(4,2), but not recommended</span>
      Can point to lambda expression<span class="token operator">?</span>
         yes<span class="token operator">!</span>
      can be <span class="token keyword keyword-const">const</span><span class="token operator">?</span>
         yes<span class="token operator">!</span>
      when is function pointer pointing to a function <span class="token keyword keyword-template">template</span> instantiated<span class="token operator">?</span>
         when pointed<span class="token operator">!</span> <span class="token punctuation">(</span>depending on the function pointer type<span class="token punctuation">)</span>
</pre><h2 class="mume-header" id="05-generic-programming">05. generic programming</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.fu</span>nction <span class="token keyword keyword-template">template</span>
      something to generate function
      <span class="token comment">// e.g.1</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         T <span class="token function">my_max</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">// The scope for name T ends here</span>
      <span class="token comment">// e.g.2</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-inline">inline</span> <span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> <span class="token function">larger</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">// The scope for name T ends here</span>
      <span class="token comment">// e.g.3</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-class">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-inline">inline</span> <span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> <span class="token function">larger</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token string">&quot;e.g.2 and e.g.3 are the same&quot;</span>
         <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> is the same as <span class="token operator">&lt;</span><span class="token keyword keyword-class">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         This is related to some history issues
         <span class="token string">&quot;typename&quot;</span> is more preferred
      The scope of <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> declaration ends at the end of the function <span class="token keyword keyword-template">template</span>
         to use T again<span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> should be done again
      Whenever a function is called with a specific type<span class="token punctuation">,</span>
         such function is really generated by the compiler
      <span class="token string">&quot;template instantiation&quot;</span>
            create a function by substituting T with the actual type
            done by checking the actual arguments in a function call
            <span class="token string">&quot;formal parameter/argument&quot;</span>
               the <span class="token string">&quot;T&quot;</span> of <span class="token string">&quot;&lt;typename T&gt;&quot;</span>
            <span class="token string">&quot;actual parameter/argument&quot;</span>
               the type of T actually used<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> <span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> string
            
      <span class="token string">&quot;explicit instantiation&quot;</span>
         cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">larger</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-double">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         in such way<span class="token punctuation">,</span> we can pass in <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5.5</span>
            without specifying the type<span class="token punctuation">,</span>
               it will be implicit instantiation
         <span class="token keyword keyword-if">if</span> no emplicit instantialtion<span class="token operator">:</span>
            error<span class="token operator">!</span>
            <span class="token keyword keyword-template">template</span> does <span class="token operator">not</span> allow automatic type conversion
      <span class="token string">&quot;template specialization&quot;</span>
      <span class="token comment">// e.g.4</span>
         <span class="token comment">// general case</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> <span class="token function">larger</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
            <span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span>a<span class="token operator">&lt;</span>b<span class="token punctuation">)</span><span class="token operator">?</span>b<span class="token operator">:</span>a<span class="token punctuation">;</span><span class="token punctuation">}</span>
         <span class="token comment">// exception case</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span> <span class="token comment">// this can be eliminated, if so, it is like overloading</span>
         <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> <span class="token keyword keyword-const">const</span><span class="token operator">&amp;</span> <span class="token function">larger</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> <span class="token keyword keyword-const">const</span><span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> <span class="token keyword keyword-const">const</span><span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
            <span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">?</span>b<span class="token operator">:</span>a<span class="token punctuation">;</span><span class="token punctuation">}</span>

         no need to put consecutively<span class="token punctuation">,</span> but the order matters
         the <span class="token string">&quot;char* const&amp;&quot;</span> in specialized <span class="token keyword keyword-case">case</span> must match the <span class="token string">&quot;T&quot;</span> in the general <span class="token keyword keyword-case">case</span>

      <span class="token string">&quot;template with more than one types&quot;</span>
      <span class="token comment">// e.g.5</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T1</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">T2</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-const">const</span> T1<span class="token operator">&amp;</span> <span class="token function">larger</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> T1<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> T2<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span>a<span class="token operator">&lt;</span>b<span class="token punctuation">)</span><span class="token operator">?</span> b<span class="token operator">:</span>a<span class="token punctuation">;</span><span class="token punctuation">}</span>
         <span class="token string">&quot;truncation possible&quot;</span>
            <span class="token string">&quot;if b is larger and is a double, it will be converted into int&quot;</span>
            even worse<span class="token operator">:</span>
               returning a temporary object<span class="token operator">!</span>
      <span class="token string">&quot;template with no parameters&quot;</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> T<span class="token operator">*</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> T<span class="token punctuation">;</span><span class="token punctuation">}</span>
         you can <span class="token operator">not</span> <span class="token keyword keyword-do">do</span><span class="token operator">:</span>
            <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// cannot deduce the type!</span>
         to fix<span class="token operator">:</span>
            <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token string">&quot;the one generated by template has lower precedence&quot;</span>
      <span class="token string">&quot;things related to templates should be put in the same file&quot;</span>

      type casting are function templates

      <span class="token string">&quot;like any ordinary functions, function template also allows declaration and definition&quot;</span>
      
   <span class="token number">2.</span><span class="token keyword keyword-class">class</span> <span class="token keyword keyword-template">template</span>
      <span class="token comment">// e.g.1</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">List_Node</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token function">List_Node</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">data</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
               List_Node<span class="token operator">*</span> next<span class="token punctuation">{</span><span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">}</span><span class="token punctuation">;</span>           <span class="token comment">// &lt;T&gt; not needed here, since we are already in class List_Node</span>
               List_Node<span class="token operator">*</span> prev<span class="token punctuation">{</span><span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
               T data<span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token string">&quot;only explicit instantiation is doable&quot;</span>
            you can <span class="token operator">not</span> <span class="token keyword keyword-do">do</span><span class="token operator">:</span>
               List_Node x<span class="token punctuation">;</span>
            you can only <span class="token keyword keyword-do">do</span><span class="token operator">:</span>
               List_Node <span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span> x<span class="token punctuation">;</span>
      <span class="token comment">// e.g.2</span>
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">List</span>
         <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               List_Node <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> head<span class="token punctuation">{</span><span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
               List_Node <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> tail<span class="token punctuation">{</span><span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token string">&quot;&lt;T&gt; here is necessary&quot;</span>
            Therefore<span class="token punctuation">,</span> linked list of e<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token number">1</span> <span class="token operator">and</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token number">2</span> has the same type <span class="token keyword keyword-for">for</span> all nodes
   <span class="token number">3.</span>nontype parameters
      <span class="token keyword keyword-this">this</span> parameter<span class="token punctuation">,</span> like the size <span class="token keyword keyword-for">for</span> array<span class="token punctuation">,</span> must be able to ne decided during compilation
      you can put a variable at <span class="token keyword keyword-template">template</span> type declaration
         such variable is <span class="token keyword keyword-const">const</span>
         such variable must be integral
         <span class="token comment">// can be const int, but this is not necessary</span>
         <span class="token comment">// e.g.3</span>
            <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> max_num_items<span class="token operator">&gt;</span>
            <span class="token keyword keyword-class">class</span> <span class="token class-name">List</span> <span class="token punctuation">{</span>
               <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
                  <span class="token keyword keyword-bool">bool</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> item<span class="token punctuation">)</span><span class="token punctuation">{</span>
                     <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>num_items <span class="token operator">==</span> max_num_items<span class="token punctuation">)</span>
                     <span class="token punctuation">{</span>
                        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;full!&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
                        <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                     <span class="token punctuation">}</span>
                     <span class="token comment">// ...</span>
                  <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
         to call<span class="token operator">:</span>
            List <span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token operator">&gt;</span> x<span class="token punctuation">;</span>
         <span class="token comment">// e.g.4</span>
            <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> N<span class="token operator">&gt;</span>
            <span class="token keyword keyword-int">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">T</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> N<span class="token punctuation">;</span><span class="token punctuation">}</span>
         explanation<span class="token operator">:</span>
            <span class="token keyword keyword-int">int</span>         <span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span>        <span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">//int type  reference   of size N</span>
            the size N is <span class="token string">&quot;automatically decided&quot;</span>
            <span class="token string">&quot;Can use this N to initialize array directly&quot;</span>
         to call<span class="token operator">:</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token string">&quot;only works with reference&quot;</span>
         <span class="token comment">// e.g.5</span>
         <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
            <span class="token string">&quot;wrong&quot;</span>
               <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> will only give the size of pointer
         <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword keyword-sizeof">sizeof</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
            <span class="token string">&quot;this will work&quot;</span>
               <span class="token string">&quot;however, size of x must be specified&quot;</span>
               <span class="token string">&quot;unless done by template&quot;</span>
      <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-template">template</span> is defined
         no separate compilation
         you can <span class="token operator">not</span> put declaration <span class="token operator">and</span> definition in different files
   <span class="token number">4.</span><span class="token keyword keyword-operator">operator</span> overloading
      <span class="token number">0.</span> general rule
         <span class="token number">1.</span> the number of arguments is fixed
         <span class="token number">2.</span> the left to right <span class="token operator">or</span> right to left sequence of execution is fixed
         <span class="token number">3.</span> the precedence is fixed
         <span class="token number">4.</span> cannot overload operators <span class="token keyword keyword-for">for</span> build<span class="token operator">-</span>in types<span class="token punctuation">,</span> can only overload operators <span class="token keyword keyword-for">for</span> user<span class="token operator">-</span>defined types

      <span class="token number">1.</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">+</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Vector</span><span class="token punctuation">{</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token class-name">Vector</span><span class="token double-colon punctuation">::</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword keyword-double">double</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
               <span class="token comment">// operator+ as global function</span>
               <span class="token string">&quot;2 arguments&quot;</span>
                  Vector <span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Vector <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Vector <span class="token operator">&amp;</span>b<span class="token punctuation">)</span>
                  <span class="token punctuation">{</span>
                     <span class="token keyword keyword-return">return</span> <span class="token function">Vector</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>
               <span class="token comment">// to make global function operator+ accessible to private data members:</span>
                  <span class="token keyword keyword-friend">friend</span> Vector <span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-friend">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment">// can finish the friend function definition in class body</span>
                     <span class="token comment">// in this way, friend functions are inline functions</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token string">&quot;do not define both operator+ as global function and operator+ as member function&quot;</span>
         <span class="token number">1.</span> <span class="token string">&quot;operator+ as global function&quot;</span>
            a <span class="token operator">+</span> b <span class="token operator">==</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            can be called by<span class="token operator">:</span>
               obj1 <span class="token operator">+</span> obj2
               obj1 <span class="token operator">+</span> <span class="token number">2.4</span>
               <span class="token number">1.2</span> <span class="token operator">+</span> obj2
               <span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">2.4</span><span class="token punctuation">)</span>
            cannot be called by<span class="token operator">:</span>
               <span class="token number">1.2</span> <span class="token operator">+</span> <span class="token number">2.4</span>   <span class="token comment">// this will call default operator+ of int</span>
            <span class="token string">&quot;some rules about operator overload&quot;</span>
               can <span class="token operator">not</span> change number of 
               can <span class="token operator">not</span> change&#x2026;&#x2026;
         <span class="token number">2.</span> <span class="token string">&quot;operator+ as member function&quot;</span>
            a <span class="token operator">+</span> b <span class="token operator">==</span> a<span class="token punctuation">.</span><span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// operator+ as member function</span>
            <span class="token string">&quot;1 argument&quot;</span>
               Vector Vector<span class="token double-colon punctuation">::</span><span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
               <span class="token punctuation">{</span>
                  <span class="token keyword keyword-return">return</span> <span class="token function">Vector</span><span class="token punctuation">(</span>x <span class="token operator">+</span> a<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y <span class="token operator">+</span> a<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
               <span class="token punctuation">}</span>
            can be called by<span class="token operator">:</span>
               obj1 <span class="token operator">+</span> obj2
               obj1 <span class="token operator">+</span> <span class="token number">2.4</span>
               obj1<span class="token punctuation">.</span><span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">2.4</span><span class="token punctuation">)</span>
               obj1<span class="token punctuation">.</span><span class="token keyword keyword-operator">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span>
            can <span class="token operator">not</span> be called by<span class="token operator">:</span>
               <span class="token number">1.2</span> <span class="token operator">+</span> obj2
               <span class="token comment">// c++ will only do conversion on parameters</span>
               <span class="token comment">// not on the stuff calling the function</span>
            <span class="token string">&quot;operator+ as global function is better than operator+ as member function&quot;</span>
      <span class="token number">2.</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span>
         cout is an object
            ostream type
            <span class="token string">&quot;do not add const for ostream&quot;</span>
               <span class="token string">&quot;we are going to change ostream when output&quot;</span>
         <span class="token comment">// has to be made friend</span>
         ostream<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            os <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> os<span class="token punctuation">;</span>
            <span class="token comment">// or:</span>
            <span class="token comment">// return os &lt;&lt; a.x &lt;&lt; &quot;, &quot; &lt;&lt; a.y;</span>
         <span class="token punctuation">}</span>
         <span class="token string">&quot;precedence: left to right&quot;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; a = &quot;</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">;</span>
            is equivalent to
            <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span><span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span><span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>cout<span class="token punctuation">,</span> <span class="token string">&quot; a = &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-return">return</span> type is <span class="token keyword keyword-void">void</span><span class="token operator">:</span>
            can <span class="token operator">not</span> <span class="token keyword keyword-do">do</span> cascating output
            i<span class="token punctuation">.</span>e<span class="token punctuation">.</span>  cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> y<span class="token punctuation">;</span> no longer supported
      <span class="token number">3.</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">+=</span>
         cascating increment is supported
            i<span class="token punctuation">.</span>e<span class="token punctuation">.</span>
               <span class="token keyword keyword-int">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-int">int</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
               <span class="token keyword keyword-int">int</span> z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
            x <span class="token operator">+=</span> y <span class="token operator">+=</span> z<span class="token punctuation">;</span>
            <span class="token string">&quot;precedence: right to left&quot;</span>
            <span class="token string">&quot;must be member function&quot;</span>
               <span class="token string">&quot;can not be global function&quot;</span>
            Vector<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
               x <span class="token operator">+=</span> a<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
               y <span class="token operator">+=</span> a<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
               <span class="token keyword keyword-return">return</span> <span class="token operator">*</span><span class="token keyword keyword-this">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
               <span class="token keyword keyword-this">this</span> will stop<span class="token operator">:</span>
                  <span class="token punctuation">(</span>v1 <span class="token operator">+=</span> v2<span class="token punctuation">)</span> <span class="token operator">+=</span> v3<span class="token punctuation">;</span> <span class="token comment">// this is not good</span>
            <span class="token keyword keyword-void">void</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
               <span class="token keyword keyword-this">this</span> will stop<span class="token operator">:</span>
                  v1 <span class="token operator">+=</span> v2 <span class="token operator">+=</span> v3<span class="token punctuation">;</span>   <span class="token comment">// cascating +=</span>
      <span class="token number">4.</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span>
         must be defined <span class="token keyword keyword-if">if</span> has pointer variable<span class="token operator">:</span>
            <span class="token number">1.</span> destructor
            <span class="token number">2.</span> copy constructor
            <span class="token number">3.</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span>
         <span class="token string">&quot;must be member function&quot;</span>
            <span class="token number">1.</span>check self assignment
            <span class="token number">2.</span>deallocate previous pointer
            <span class="token number">3.</span>reallocate a <span class="token keyword keyword-new">new</span> pointer
            <span class="token number">4.</span>copy data to the <span class="token keyword keyword-new">new</span> pointer
            <span class="token number">5.</span><span class="token keyword keyword-return">return</span> <span class="token operator">*</span><span class="token keyword keyword-this">this</span>
            MyArray<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> MyArray<span class="token operator">&amp;</span> arr<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
               <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span><span class="token keyword keyword-this">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">)</span>  <span class="token comment">// avoid a = a (*this != arr is illegal: no operator==)</span>
                                 <span class="token comment">// if no checking: p and arr.p might be the same, then delete p cause trouble</span>
               <span class="token punctuation">{</span>
                  size <span class="token operator">=</span> arr<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
                  <span class="token keyword keyword-delete">delete</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> p<span class="token punctuation">;</span>
                  p <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-int">int</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
                  <span class="token keyword keyword-for">for</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>\
                     p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
               <span class="token keyword keyword-return">return</span> <span class="token operator">*</span><span class="token keyword keyword-this">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token string">&quot;use operator= to implement copy constructor&quot;</span>
            <span class="token function">MyArray</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> MyArray<span class="token operator">&amp;</span> ma<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
               <span class="token operator">*</span><span class="token keyword keyword-this">this</span> <span class="token operator">=</span> ma<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token operator">:</span><span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword keyword-nullptr">nullptr</span><span class="token punctuation">)</span>
               <span class="token string">&quot;deleting nullptr is allowed&quot;</span>
               <span class="token keyword keyword-if">if</span> no <span class="token string">&quot;:p(nullptr)&quot;</span><span class="token punctuation">,</span> it might <span class="token keyword keyword-delete">delete</span> some weird address
                  <span class="token string">&quot;error&quot;</span>
      <span class="token number">5.</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
         <span class="token string">&quot;usually has to define 2: one for non-const objects, one for const objects&quot;</span>
         <span class="token keyword keyword-double">double</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> j<span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span>  <span class="token comment">// not changeable</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-switch">switch</span> <span class="token punctuation">(</span>j<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
            <span class="token keyword keyword-case">case</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> x<span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> y<span class="token punctuation">;</span>
            
            <span class="token keyword keyword-default">default</span><span class="token operator">:</span>
               cerr <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;invalid dimension!\n&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
         <span class="token keyword keyword-double">double</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> j<span class="token punctuation">)</span>    <span class="token comment">// changeable</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-switch">switch</span> <span class="token punctuation">(</span>j<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
            <span class="token keyword keyword-case">case</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> x<span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> y<span class="token punctuation">;</span>
            
            <span class="token keyword keyword-default">default</span><span class="token operator">:</span>
               cerr <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;invalid dimension!\n&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
         index can be any type<span class="token punctuation">,</span> including string <span class="token operator">and</span> <span class="token keyword keyword-char">char</span>
         <span class="token string">&quot;can only has one index&quot;</span>
         <span class="token keyword keyword-operator">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> can have more than one index<span class="token punctuation">;</span>
      <span class="token number">6.</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">++</span>
         both as member function <span class="token operator">and</span> global function
         pre increment
            <span class="token operator">++</span>x<span class="token punctuation">;</span>
            returns variable
         post increment
            x<span class="token operator">++</span><span class="token punctuation">;</span>
            returns value
         
      <span class="token number">6.</span> sum
         <span class="token number">1.</span> member function
            <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-if">if</span> declared as global<span class="token punctuation">,</span> may conflict with <span class="token keyword keyword-default">default</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span><span class="token punctuation">)</span>
               <span class="token comment">// &quot;automatically virtual&quot;</span>
            <span class="token keyword keyword-operator">operator</span><span class="token operator">-&gt;</span>
            <span class="token keyword keyword-operator">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword keyword-operator">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
         <span class="token number">2.</span> global function
            <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span>
            <span class="token comment">// can be defined in class with &quot;friend&quot;</span>
            <span class="token string">&quot;friend function is automatically global&quot;</span>
            <span class="token keyword keyword-if">if</span> you are to define <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span> as member function<span class="token operator">:</span>
               ostream<span class="token operator">&amp;</span> Vector<span class="token double-colon punctuation">::</span><span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">)</span>
               <span class="token punctuation">{</span>
               <span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span>os <span class="token operator">&lt;&lt;</span> <span class="token string">&apos;(&apos;</span> <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; , &quot;</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">&apos;)&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
            then it will be called by<span class="token operator">:</span>
               d <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;vector + vector: a + b = &quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token string">&quot;bad&quot;</span>
         <span class="token number">3.</span> either
            <span class="token keyword keyword-operator">operator</span><span class="token operator">+=</span>
            <span class="token keyword keyword-operator">operator</span><span class="token operator">+</span>
            <span class="token keyword keyword-operator">operator</span><span class="token operator">++</span>
            <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;</span>
               <span class="token string">&quot;when we define &lt;, &gt; is not automatically defined&quot;</span>
</pre><h2 class="mume-header" id="06-standard-template-library-stl">06. standard template library (STL)</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span><span class="token string">&quot;Containers&quot;</span>
      used to store data
      implemented as <span class="token string">&quot;class templates&quot;</span>
      <span class="token string">&quot;storing only one type of data&quot;</span>
         homogeneous
      types<span class="token operator">:</span>
         <span class="token number">1.</span>Sequence containers
            <span class="token string">&quot;linear&quot;</span>
            vector 
            list 
            deque <span class="token comment">//double ended queue</span>
               map <span class="token operator">+</span> a sequence of arrays
                  <span class="token comment">// map</span>
                  <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                  Unused
                  Chunk0 <span class="token operator">-&gt;</span> Unused<span class="token punctuation">,</span> Unused<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
                  Chunk1 <span class="token operator">-&gt;</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span>
                  Chunk2 <span class="token operator">-&gt;</span> data<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Unused<span class="token punctuation">,</span> Unused<span class="token punctuation">,</span> Unused<span class="token punctuation">,</span> Unused
                  Unused
                  <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> first Unused in chunk2
               <span class="token string">&quot;for more storage&quot;</span>
                  extend the map<span class="token punctuation">,</span> have more arrays

            member functions <span class="token keyword keyword-for">for</span> <span class="token string">&quot;sequence containers&quot;</span>      
               <span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> First element
                  <span class="token comment">// for all</span>
               <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>  Last element
                  <span class="token comment">// for all</span>
               <span class="token keyword keyword-operator">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span> Subscript <span class="token keyword keyword-operator">operator</span><span class="token punctuation">,</span> index <span class="token operator">not</span> checked
                  <span class="token comment">// for vector and deque</span>
                  <span class="token string">&quot;not for list&quot;</span>
                  <span class="token string">&quot;can do modification (lvalue)&quot;</span>
               <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token comment">/* data */</span><span class="token punctuation">)</span><span class="token operator">:</span> Append element
                  <span class="token comment">// for all</span>
               <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Remove last element<span class="token punctuation">,</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-void">void</span>
                  <span class="token comment">// for all</span>
               <span class="token function">push_front</span><span class="token punctuation">(</span><span class="token comment">/* data */</span><span class="token punctuation">)</span><span class="token operator">:</span> Insert element at front
                  <span class="token comment">// for all</span>
               <span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Remove first element
                  <span class="token comment">// for all</span>
               <span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token operator">:</span> Insert x at position p
                  <span class="token comment">// fast for list, available for vector and deque</span>
               <span class="token function">erase</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">:</span> Remove an element at p
                  <span class="token comment">// fast for list, available for vector and deque</span>
                  <span class="token comment">// iterator: has to use return type to jump to next</span>
               <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Erase all
                  <span class="token comment">// fast for list, available for vector and deque</span>
               <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Number of elements
                  capacity vs size<span class="token operator">:</span>
                     capacity<span class="token operator">:</span> total number of memory available
                     size<span class="token operator">:</span> number of data that is actually stored
                  
               <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Return <span class="token boolean">true</span> <span class="token keyword keyword-if">if</span> is empty
               <span class="token function">resize</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> new_size<span class="token punctuation">)</span><span class="token operator">:</span> change the <span class="token string">&quot;size&quot;</span>
                  new_size <span class="token operator">&lt;</span> current_size<span class="token operator">:</span>
                     erase data
                  new_size <span class="token operator">&gt;</span> current_size<span class="token operator">:</span>
                     more <span class="token number">0</span>s
               <span class="token keyword keyword-operator">operator</span><span class="token operator">==</span><span class="token punctuation">,</span> <span class="token operator">!=</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token punctuation">,</span> <span class="token operator">=</span>
                  <span class="token string">&quot;constructor&quot;</span>
                     vector<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     <span class="token string">&quot;must do explicit instantiation&quot;</span>
                     <span class="token string">&quot;the input value will be the size, not capacity&quot;</span>
                     <span class="token string">&quot;initialized as all 0&quot;</span>
               <span class="token string">&quot;Can not assign value to an index outside range&quot;</span>
                  e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
                     v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   <span class="token string">&quot;invalid&quot;</span>
         <span class="token number">2.</span>Associative containers
            <span class="token string">&quot;branches&quot;</span>
            map
            multimap
            multiset
            set <span class="token comment">// a set of elements, no duplicate</span>
         <span class="token number">3.</span>Container adapters
            <span class="token string">&quot;use other containers to store data, and maintain some properties&quot;</span>
            stack <span class="token comment">// last in first out</span>
            queue <span class="token comment">// first in first out</span>
            priority queue
         <span class="token number">4.</span>Near<span class="token operator">-</span>containers
            <span class="token string">&quot;not like container, but is container&quot;</span>
            string
            valarray
            bitset
         
   <span class="token number">2.</span><span class="token string">&quot;Iterators&quot;</span>
      <span class="token string">&quot;pointers to point at STL members&quot;</span>
      <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> get the address of the first box
      <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> get the address of the box <span class="token string">&quot;after&quot;</span> the last box
         <span class="token operator">not</span> the last box
      e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         vector<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token operator">*</span>it<span class="token punctuation">;</span>  <span class="token comment">// dereferencing, getting first element of v</span>
         <span class="token operator">*</span><span class="token punctuation">(</span>it <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">// getting second element of v</span>
      good things about iterators
         <span class="token string">&quot;v[i] does not work for list&quot;</span>
         <span class="token string">&quot;*(it + i) works for all containers&quot;</span>
      const_iterator
         like <span class="token keyword keyword-const">const</span> pointer
   <span class="token number">3.</span><span class="token string">&quot;Algorithms&quot;</span>
      highly optimized
      implemented as <span class="token string">&quot;function templates&quot;</span>
      <span class="token number">1.</span> find
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">Iterator</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         Iterator <span class="token function">find</span><span class="token punctuation">(</span>Iterator begin<span class="token punctuation">,</span> Iterator end<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> value<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>begin <span class="token operator">!=</span> end <span class="token operator">&amp;&amp;</span> <span class="token operator">*</span>begin <span class="token operator">!=</span> value<span class="token punctuation">)</span>
               <span class="token operator">++</span>begin<span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> begin<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         why <span class="token keyword keyword-typename">typename</span> <span class="token class-name">Iterator</span><span class="token operator">?</span>
            to improve readability
            just a <span class="token keyword keyword-typename">typename</span>
         <span class="token string">&quot;This works for all containers in STL&quot;</span>
            even works <span class="token keyword keyword-for">for</span> regular array
      <span class="token number">2.</span> find_if
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">Iterator</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">Predicate</span><span class="token operator">&gt;</span>
         Iterator <span class="token function">find_if</span><span class="token punctuation">(</span>Iterator first<span class="token punctuation">,</span> Iterator last<span class="token punctuation">,</span> Predicate predicate<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>first <span class="token operator">!=</span> last <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">predicate</span><span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">)</span>
               <span class="token operator">++</span>first<span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> first<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         Predicate is a function pointer that points at a function that returns <span class="token keyword keyword-bool">bool</span>
         This will find a value that satisfies <span class="token function">predicate</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token number">3.</span> count_if
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">Iterator</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">Predicate</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-int">int</span> <span class="token function">count_if</span><span class="token punctuation">(</span>Iterator first<span class="token punctuation">,</span> Iterator last<span class="token punctuation">,</span> Predicate predicate<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-int">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-for">for</span><span class="token punctuation">(</span>Iterator it <span class="token operator">=</span> first<span class="token punctuation">;</span> it <span class="token operator">!=</span> last<span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
               <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span><span class="token function">predicate</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span> count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-return">return</span> count<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token number">4.</span> for_each
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">Iterator</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">Function</span><span class="token operator">&gt;</span>
         Function <span class="token function">for_each</span><span class="token punctuation">(</span>Iterator first<span class="token punctuation">,</span> Iterator last<span class="token punctuation">,</span> Function f<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>Iterator it <span class="token operator">=</span> first<span class="token punctuation">;</span> it <span class="token operator">!=</span> last<span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>
               <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> f<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token number">5.</span> transform
      <span class="token string">&quot;make sure that the size of the container getting the result is big enough&quot;</span>
      <span class="token string">&quot;return the iterator pointing to the object after the last object of result container&quot;</span>
      <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">Iterator1</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">Iterator2</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">Function</span><span class="token operator">&gt;</span>
      Iterator2 <span class="token function">transform</span><span class="token punctuation">(</span>Iterator1 first<span class="token punctuation">,</span> Iterator1 last<span class="token punctuation">,</span> Iterator2 result<span class="token punctuation">,</span> Function f<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
         <span class="token keyword keyword-for">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>first <span class="token operator">!=</span> last<span class="token punctuation">;</span> first<span class="token operator">++</span><span class="token punctuation">,</span>result<span class="token operator">++</span><span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
            <span class="token operator">*</span>result <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token keyword keyword-return">return</span> result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token number">2.fu</span>nction objects
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token keyword keyword-void">void</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">// do something</span>
               <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         An object<span class="token punctuation">,</span> in <span class="token string">&quot;class type&quot;</span><span class="token punctuation">,</span> that overloads <span class="token keyword keyword-operator">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
               <span class="token keyword keyword-int">int</span> value<span class="token punctuation">;</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">value</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

               <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> v <span class="token operator">&gt;</span> value<span class="token punctuation">;</span><span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         <span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            A <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x is called function object</span>
            cout <span class="token operator">&lt;&lt;</span> boolalpha <span class="token operator">&lt;&lt;</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token string">&quot;x is like a function&quot;</span>
         usage<span class="token operator">:</span>
            can be the predicate <span class="token keyword keyword-for">for</span> find_if function
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
            <span class="token comment">// there is an object Greater_Than</span>
            vector<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>const_iterator p <span class="token operator">=</span> 
               <span class="token function">find_if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Greater_Than</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token number">1.</span>Array
         <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
         <span class="token keyword keyword-class">class</span> <span class="token class-name">Array</span>
         <span class="token punctuation">{</span>
            <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">S</span><span class="token operator">&gt;</span>   <span class="token comment">// do not use T, redefine another template</span>
               <span class="token keyword keyword-friend">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Array<span class="token operator">&lt;</span>S<span class="token operator">&gt;</span><span class="token operator">&amp;</span> printed<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-private">private</span><span class="token operator">:</span>
               T<span class="token operator">*</span> _value<span class="token punctuation">;</span>  <span class="token string">&quot;copy constructor, operator= necessary&quot;</span>
               <span class="token keyword keyword-int">int</span> _size<span class="token punctuation">;</span>
            <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
               <span class="token string">&quot;in the following, &lt;T&gt; is omittable&quot;</span>
                  <span class="token string">&quot;this is because we are still inside the definition of the class&quot;</span>
                  <span class="token string">&quot;however, to be consistant, it is better to include &lt;T&gt;&quot;</span>
               <span class="token generic-function"><span class="token function">Array</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Default and conversion constructor</span>
               <span class="token generic-function"><span class="token function">Array</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Array<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// copy constructor</span>
               <span class="token operator">~</span><span class="token generic-function"><span class="token function">Array</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

               Array<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Array<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
               T<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword keyword-return">return</span> _value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
               <span class="token comment">// ...</span>
         <span class="token punctuation">}</span>
         <span class="token string">&quot;member function implementation&quot;</span>
            <span class="token string">&quot;remember: template do not support separate compilation&quot;</span>
</pre><h2 class="mume-header" id="07-tree">07. tree</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token string">&quot;Edge&quot;</span>
      &#x68CD;&#x5B50;
   <span class="token string">&quot;Root&quot;</span>
      the node without parents
   <span class="token string">&quot;Parent and child&quot;</span>
      every node except the root has exactly <span class="token number">1</span> parent
      a node can have <span class="token number">0</span> <span class="token operator">or</span> more children
   <span class="token string">&quot;Leaves&quot;</span>
      nodes with no child
   <span class="token string">&quot;Siblings&quot;</span>
      nodes with the same parent
   <span class="token string">&quot;Path&quot;</span>
      a sequence of nodes <span class="token punctuation">{</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token function">n</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">}</span> such that <span class="token function">n</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> is parent of <span class="token function">n</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
   <span class="token string">&quot;Length&quot;</span>
      number of edges on the path
   <span class="token string">&quot;Depth of nodes&quot;</span>
      number of edges to root
   <span class="token string">&quot;Height of nodes&quot;</span>
      number of edges to deepest leaf
   <span class="token string">&quot;Height of trees&quot;</span>
      height of root
   <span class="token string">&quot;Descendant&quot;</span>
      All children<span class="token operator">/</span>grandchildren <span class="token operator">+</span> itself
   <span class="token string">&quot;Proper descendant&quot;</span>
      Descendant excluding itself
   <span class="token string">&quot;Ancestor&quot;</span>
      All parents<span class="token operator">/</span>grandparents <span class="token operator">+</span> itself
   <span class="token string">&quot;Proper ancestor&quot;</span>
      Ancestor excluding itself
   
   File directory<span class="token operator">:</span> a tree<span class="token operator">!</span>

   Binary tree
      Strict binary tree<span class="token operator">:</span>
         each node<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">or</span> <span class="token number">0</span> children
      Generic binary tree<span class="token operator">:</span>
         each node<span class="token punctuation">,</span> <span class="token operator">&lt;=</span> <span class="token number">2</span> nodes
      Good tree<span class="token operator">:</span>
         balanced
   <span class="token string">&quot;scan through every nodes in a tree&quot;</span>
      L<span class="token operator">:</span> left
      C<span class="token operator">:</span> current
      R<span class="token operator">:</span> right
      <span class="token number">1.</span><span class="token string">&quot;In order&quot;</span> L C R
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
               A
            B     C
           D E
         <span class="token string">&quot;D B E A C&quot;</span>
      <span class="token number">2.</span><span class="token string">&quot;Pre order&quot;</span> C L R
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
               A
            B     C
           D E
         <span class="token string">&quot;A B D E C&quot;</span>
      <span class="token number">3.</span><span class="token string">&quot;Post order&quot;</span> L R C
            e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
               A
            B     C
           D E
         <span class="token string">&quot;D E B C A&quot;</span>
      computer likes <span class="token string">&quot;Pre order&quot;</span> better
      human likes <span class="token string">&quot;In order&quot;</span> better

      expression tree
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> use tree to express <span class="token operator">+</span> <span class="token operator">-</span> <span class="token operator">*</span> <span class="token operator">/</span> sequences

      binary search tree
         all nodes in left <span class="token operator">&lt;</span> C
         all nodes in right <span class="token operator">&gt;</span> C
         <span class="token string">&quot;fast searching&quot;</span>
         <span class="token string">&quot;can have different shapes&quot;</span>
            average depth <span class="token function">log</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span>
            maximum depth N
      to <span class="token keyword keyword-delete">delete</span> a node in binary search tree
         <span class="token number">1.</span> no child
            just <span class="token keyword keyword-delete">delete</span>
         <span class="token number">2.</span> one child
            pass it to parents
         <span class="token number">3.</span> two children
            pass the minimum in the right subtree <span class="token operator">and</span> pass it to the killed node
            <span class="token operator">or</span> the maximum in the left subtree <span class="token operator">and</span> pass it to the killed node
            <span class="token string">&quot;the minimum in right and maximum in left can have at least one child&quot;</span>
         <span class="token string">&quot;when killing, remember to connect the descendents&quot;</span>
         <span class="token string">&quot;and disconnect to the being killed node before deleting&quot;</span>
      <span class="token string">&quot;Always make sure that the deepest one is nullptr&quot;</span>
</pre><h2 class="mume-header" id="08-hashing">08. hashing</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span>terminology
   <span class="token string">&quot;hash table&quot;</span>
      an array of some fixed size
      <span class="token string">&quot;key&quot;</span>
         element of hash table
   <span class="token string">&quot;hash function&quot;</span>
      the mapping from key to value
      <span class="token string">&quot;value&quot;</span>
         the value a key is mapped to
   <span class="token string">&quot;hashing&quot;</span>
      the whole process
   <span class="token number">2.</span>performance
   good <span class="token keyword keyword-for">for</span><span class="token operator">:</span>
      insertion
      searching
   bad <span class="token keyword keyword-for">for</span><span class="token operator">:</span>
      find min
      find max
   <span class="token number">3.</span>hashing
      <span class="token string">&quot;keys U&quot;</span>
         set of all possible values
      an element of hash table <span class="token string">&apos;T&apos;</span> is a key <span class="token string">&apos;k&apos;</span><span class="token punctuation">,</span> which is a subset of <span class="token string">&apos;U&apos;</span>
         m<span class="token operator">:</span><span class="token operator">=</span> <span class="token operator">|</span>T<span class="token operator">|</span><span class="token punctuation">,</span> m <span class="token operator">&lt;&lt;</span> <span class="token operator">|</span>U<span class="token operator">|</span>
      hash function <span class="token function">h</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
         from key<span class="token punctuation">,</span> get index of k
         data stored in T<span class="token punctuation">[</span><span class="token function">h</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">]</span>
      collision
         Two keys hashed to the same slot
         <span class="token string">&quot;solution&quot;</span>
            <span class="token number">1.</span> design better hash function
            <span class="token number">2.</span> open up a <span class="token keyword keyword-new">new</span> slot
      Hash function design
         <span class="token function">h</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">=</span> k mod m
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> m <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">1234</span>
            k mod m <span class="token operator">=</span> <span class="token number">100</span>
               only the last <span class="token number">2</span> digits are used
               <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword keyword-do">do</span> <span class="token operator">not</span> make use of all digits
            <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;power of 10 is bad&quot;</span>
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> m <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">17</span>
            <span class="token number">17</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">)</span><span class="token number">2</span>
               only the last <span class="token number">2</span> digits of binary code are used
               <span class="token operator">=</span><span class="token operator">&gt;</span> very easy to get collision
            <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;power of 2 is bad&quot;</span>
         good m<span class="token operator">:</span>
            prime number
            <span class="token operator">not</span> so close to some power of <span class="token number">2</span>
               almost middle of <span class="token number">2</span> <span class="token string">&quot;power of 2&quot;</span>s
         <span class="token string">&quot;for non-integers?&quot;</span>
            <span class="token number">1.</span> use ASCII <span class="token operator">and</span> add up
               e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> h e l  l  o
                    <span class="token number">8</span> <span class="token number">5</span> <span class="token number">12</span> <span class="token number">12</span> <span class="token number">15</span> <span class="token operator">-&gt;</span> <span class="token number">52</span>
               problem<span class="token operator">:</span> sometimes same set of characters
            <span class="token number">2.</span> <span class="token function">h</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">27</span><span class="token operator">*</span>k<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">27</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">*</span>k<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> mod m
               even characters are the same<span class="token punctuation">,</span> <span class="token keyword keyword-if">if</span> ordering are <span class="token operator">not</span> the same<span class="token punctuation">,</span> the value will <span class="token operator">not</span> be the same
               problem<span class="token operator">:</span> sometimes first <span class="token number">3</span> charaters are the same
            <span class="token number">3.</span> <span class="token function">h</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">37</span><span class="token operator">^</span><span class="token punctuation">(</span>L<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">37</span><span class="token operator">^</span><span class="token punctuation">(</span>L<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span>key<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">+</span> key<span class="token punctuation">[</span>L<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> mod m
               avoiding a lot of collisions
               problem<span class="token operator">:</span> complicated<span class="token punctuation">,</span> time consuming
         <span class="token string">&quot;collision handling&quot;</span>
            separate chaining
               implement as a table of linked lists
               keys<span class="token operator">:</span> <span class="token number">0</span>  <span class="token operator">-&gt;</span> <span class="token number">0</span>  <span class="token operator">-&gt;</span> <span class="token number">10</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-nullptr">nullptr</span>
                     <span class="token number">1</span>  <span class="token operator">-&gt;</span> <span class="token number">81</span> <span class="token operator">-&gt;</span> <span class="token number">1</span>  <span class="token operator">-&gt;</span> <span class="token keyword keyword-nullptr">nullptr</span>
                     <span class="token number">2</span>  <span class="token operator">-&gt;</span> <span class="token keyword keyword-nullptr">nullptr</span>
                     <span class="token number">3</span>  <span class="token operator">-&gt;</span> <span class="token keyword keyword-nullptr">nullptr</span>
                     <span class="token number">4</span>  <span class="token operator">-&gt;</span> <span class="token keyword keyword-nullptr">nullptr</span>
                     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
               where to add <span class="token keyword keyword-new">new</span> data<span class="token operator">:</span>
                  add at root<span class="token operator">:</span> more efficient adding
               run time no longer <span class="token string">&quot;O(1)&quot;</span>
               advantage<span class="token operator">:</span>
                  easy deletion
               disadvantage<span class="token operator">:</span>
                  memory allocations <span class="token operator">and</span> deallocations in linked list<span class="token operator">:</span> expensive
                  <span class="token string">&quot;new and delete: expensive&quot;</span>
            open addressing
               linear probing
               quadratic probing

               <span class="token keyword keyword-double">double</span> hashing          <span class="token comment">// best</span>
                  expensive computing
      <span class="token number">1.</span><span class="token string">&quot;linear probing&quot;</span>
         when collision happens<span class="token operator">:</span> keep moving downwards until reaches one empty box
            insert<span class="token operator">:</span>  <span class="token number">89</span> <span class="token number">18</span> <span class="token number">49</span> <span class="token number">58</span> <span class="token number">69</span>
                  <span class="token number">0</span>        <span class="token number">49</span> <span class="token number">49</span> <span class="token number">49</span>
                  <span class="token number">1</span>           <span class="token number">58</span> <span class="token number">58</span>
                  <span class="token number">2</span>              <span class="token number">69</span>
                  <span class="token number">3</span>
                  <span class="token number">4</span>
                  <span class="token number">5</span>
                  <span class="token number">6</span>
                  <span class="token number">7</span>
                  <span class="token number">8</span>     <span class="token number">18</span> <span class="token number">18</span> <span class="token number">18</span> <span class="token number">18</span>
                  <span class="token number">9</span>  <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span>
            searching<span class="token operator">:</span>
               <span class="token function">h</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">=</span> k mod <span class="token number">10</span><span class="token punctuation">,</span>
               keep moving downwards 
                  until reaching the searched one
                  <span class="token operator">or</span> reaching an empty area
                  <span class="token string">&quot;you can not remove an element from hash table&quot;</span>
                     <span class="token string">&quot;if you do so, there is a problem in searching&quot;</span>
                     solution<span class="token operator">:</span> lazy deleteion
                     <span class="token number">3</span> types of label<span class="token operator">:</span>
                        <span class="token string">&quot;EMPTY&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ACTIVE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETED&quot;</span>
                        instead of really removing<span class="token punctuation">,</span> you mark a label <span class="token string">&quot;DELETED&quot;</span>
                        tell searching function to keep go searching when it reaches <span class="token keyword keyword-this">this</span> box
                        <span class="token operator">and</span> <span class="token keyword keyword-this">this</span> box can be occupied by <span class="token keyword keyword-new">new</span> elements
                  <span class="token number">0</span> <span class="token number">49</span>
                  <span class="token number">1</span> <span class="token number">58</span>
                  <span class="token number">2</span> <span class="token number">69</span>
                  <span class="token number">3</span>
                  <span class="token number">4</span>
                  <span class="token number">5</span>
                  <span class="token number">6</span>
                  <span class="token number">7</span>
                  <span class="token number">8</span> <span class="token number">18</span>
                  <span class="token number">9</span> <span class="token number">89</span>
         problem
            <span class="token string">&quot;primary clustering&quot;</span><span class="token string">&quot;refer to ppt!!!!!!?!?!?!???????&quot;</span>
      <span class="token number">2.</span><span class="token string">&quot;quadratic probing&quot;</span>
         trial <span class="token operator">and</span> error<span class="token operator">:</span>
            <span class="token number">1</span>st time<span class="token punctuation">,</span> move down by <span class="token number">1</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">1</span>
            <span class="token keyword keyword-if">if</span> collision again<span class="token punctuation">,</span> move back
            <span class="token number">2</span>nd time<span class="token punctuation">,</span> move down by <span class="token number">2</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">4</span>
            <span class="token keyword keyword-if">if</span> collision again<span class="token punctuation">,</span> move back
            <span class="token number">3</span>rd time<span class="token punctuation">,</span> move down by <span class="token number">3</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">9</span>
            <span class="token keyword keyword-if">if</span> collision again<span class="token punctuation">,</span> move back
            <span class="token number">4</span>rd time<span class="token punctuation">,</span> move down by <span class="token number">4</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">16</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            insert<span class="token operator">:</span>  <span class="token number">89</span> <span class="token number">18</span> <span class="token number">49</span> <span class="token number">58</span> <span class="token number">69</span>
                  <span class="token number">0</span>        <span class="token number">49</span> <span class="token number">49</span> <span class="token number">49</span>
                  <span class="token number">1</span>  
                  <span class="token number">2</span>           <span class="token number">58</span> <span class="token number">58</span>
                  <span class="token number">3</span>              <span class="token number">69</span>
                  <span class="token number">4</span>
                  <span class="token number">5</span>
                  <span class="token number">6</span>
                  <span class="token number">7</span>
                  <span class="token number">8</span>     <span class="token number">18</span> <span class="token number">18</span> <span class="token number">18</span> <span class="token number">18</span>
                  <span class="token number">9</span>  <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span>
         problem<span class="token operator">:</span>
            <span class="token string">&quot;secondary clustering&quot;</span><span class="token string">&quot;refer to ppt!!!!!!?!?!?!???????&quot;</span>
         <span class="token string">&quot;if table size is prime: a new key can always be inserted if the table is at least half empty&quot;</span>
      <span class="token number">3.</span><span class="token string">&quot;double hasing&quot;</span>
         <span class="token function">h1</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">=</span> k mod <span class="token number">10</span>
         <span class="token function">h2</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">7</span> <span class="token operator">-</span> <span class="token punctuation">(</span>k mod <span class="token number">7</span><span class="token punctuation">)</span>
         when collision happens<span class="token operator">:</span>
            keep moving downwards <span class="token keyword keyword-for">for</span> h2 value until reaches one empty box
         trial <span class="token operator">and</span> error<span class="token operator">:</span>
            insert<span class="token operator">:</span>  <span class="token number">89</span> <span class="token number">18</span> <span class="token number">49</span> <span class="token number">58</span> <span class="token number">69</span>
                  <span class="token number">0</span>              <span class="token number">69</span>
                  <span class="token number">1</span>
                  <span class="token number">2</span>
                  <span class="token number">3</span>           <span class="token number">58</span> <span class="token number">58</span>
                  <span class="token number">4</span>
                  <span class="token number">5</span>
                  <span class="token number">6</span>        <span class="token number">49</span> <span class="token number">49</span> <span class="token number">49</span>
                  <span class="token number">7</span>
                  <span class="token number">8</span>     <span class="token number">18</span> <span class="token number">18</span> <span class="token number">18</span> <span class="token number">18</span>
                  <span class="token number">9</span>  <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span> <span class="token number">89</span>
         <span class="token number">1.</span>size of hash table is prime
         <span class="token number">2.</span>hash table is less than half filled
         <span class="token string">&quot;analysis&quot;</span>
            <span class="token function">h1</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">=</span> k mod m
            <span class="token function">h2</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">=</span> R <span class="token operator">-</span> <span class="token punctuation">(</span>k mod R<span class="token punctuation">)</span>
            m <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">,</span>R <span class="token operator">=</span> <span class="token number">7</span>
            possible value by <span class="token function">h2</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token operator">?</span>
               k mod <span class="token number">7</span>  <span class="token operator">:</span> <span class="token number">0</span><span class="token operator">-</span><span class="token number">6</span>
               <span class="token function">h2</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>    <span class="token operator">:</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">7</span>
            <span class="token string">&quot;m should be prime&quot;</span>
            <span class="token string">&quot;good h2(k):&quot;</span>
               all value generated by <span class="token function">h2</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> is relatively prime to m
                  relatively prime<span class="token operator">:</span> <span class="token function">gcd</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span>
               to make <span class="token keyword keyword-this">this</span> possible<span class="token punctuation">,</span> just pick an R that is prime number
                  that is smaller than m
      <span class="token number">4.</span><span class="token string">&quot;Re-hashing&quot;</span>
         load factor &#x3B1; <span class="token operator">=</span> N <span class="token operator">/</span> m
            N<span class="token operator">:</span> number actually hashed
            when &#x3B1; becomes <span class="token function">large</span> <span class="token punctuation">(</span>around <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
               <span class="token keyword keyword-double">double</span> the table size <span class="token comment">// not exactly double, has to be prime</span>
               <span class="token operator">and</span> re<span class="token operator">-</span>hash all data items with a <span class="token keyword keyword-new">new</span> hash function
            <span class="token string">&quot;can really erase data in re-hasing&quot;</span>
</pre><h2 class="mume-header" id="09-additional-knowledge">09. additional knowledge</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span><span class="token string">&quot;for loop&quot;</span>
      <span class="token keyword keyword-int">int</span> range<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> v <span class="token operator">:</span> range<span class="token punctuation">)</span> 
      <span class="token punctuation">{</span>
         <span class="token comment">/* code */</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// put elements in range to v one by one</span>
   <span class="token number">2.</span><span class="token string">&quot;to print out address of str/char&quot;</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-void">void</span><span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token number">3.</span> <span class="token punctuation">[</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">]</span> <span class="token operator">*</span> name <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token punctuation">[</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">[</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">&gt;</span> must be right
         <span class="token string">&quot;if const, must initialize&quot;</span>
   <span class="token number">4.</span> in array<span class="token punctuation">,</span> construct one by one
   <span class="token number">5.</span> string comparison
      <span class="token string">&quot;desmond&quot;</span> vs <span class="token string">&quot;peter&quot;</span><span class="token operator">:</span>
         <span class="token string">&apos;p&apos;</span> <span class="token operator">&gt;</span> <span class="token string">&apos;d&apos;</span>
         so <span class="token string">&quot;peter&quot;</span> <span class="token operator">&gt;</span> <span class="token string">&quot;desmond&quot;</span>
      <span class="token string">&quot;des&quot;</span> vs <span class="token string">&quot;d&quot;</span>
         <span class="token number">3</span> <span class="token keyword keyword-char">char</span> <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token keyword keyword-char">char</span>
         so <span class="token string">&quot;des&quot;</span> <span class="token operator">&gt;</span> <span class="token string">&quot;d&quot;</span>
      <span class="token keyword keyword-if">if</span> we compare <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span><span class="token punctuation">,</span>
         it will compare addresses<span class="token punctuation">,</span>
         <span class="token string">&quot;not the content&quot;</span>
   <span class="token number">6.</span> <span class="token keyword keyword-return">return</span> by value
      when reaching the end of <span class="token string">&quot;}&quot;</span> of callee function<span class="token punctuation">,</span>
         temporary objects of callee function will be killed
         therefore<span class="token punctuation">,</span> another temporary object has to be generated to be returned
      RVO
         will <span class="token operator">not</span> kill temporary object to be returned immediately<span class="token punctuation">,</span>
         that temporary will live until the end of 
   <span class="token number">7.</span> <span class="token keyword keyword-const">const</span> reference as parameters
      <span class="token keyword keyword-const">const</span> reference will initialize poor guy <span class="token keyword keyword-if">if</span><span class="token operator">:</span>
         <span class="token number">1.</span> <span class="token keyword keyword-const">const</span> literal is assigned
         <span class="token number">2.</span> type mismatch
   <span class="token number">8.</span> we can <span class="token keyword keyword-delete">delete</span> <span class="token keyword keyword-nullptr">nullptr</span>
   <span class="token number">9.</span> <span class="token keyword keyword-const">const</span> overloading
      <span class="token keyword keyword-const">const</span> member function can only be called by <span class="token keyword keyword-const">const</span> object<span class="token punctuation">,</span> 
      non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> member function will be called by non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> object <span class="token string">&quot;perfect match&quot;</span>
      <span class="token keyword keyword-if">if</span> only <span class="token keyword keyword-const">const</span> member function is defined<span class="token punctuation">,</span> then both <span class="token keyword keyword-const">const</span> object <span class="token operator">and</span> non<span class="token operator">-</span><span class="token keyword keyword-const">const</span> object can call it
   <span class="token number">10.</span> which <span class="token keyword keyword-template">template</span> to instantiate<span class="token operator">?</span>
      <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span> num<span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
      <span class="token keyword keyword-void">void</span> <span class="token function">foo</span><span class="token punctuation">(</span>T a<span class="token punctuation">)</span>
      <span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span> num<span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
      <span class="token keyword keyword-void">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">)</span>   <span class="token comment">// this will be considered as partial specialization</span>
      <span class="token number">1.</span> when specialized can be called<span class="token punctuation">,</span> specialized one has higher priority
      <span class="token number">2.</span> every single parameter has to be used in the parameter list in other to be automatically deduced
      <span class="token number">3.</span> the order of the parameter list matters<span class="token punctuation">,</span> <span class="token operator">and</span> the one inputted in <span class="token keyword keyword-explicit">explicit</span> instantiation has to be put at the front
      <span class="token string">&quot;standard cases&quot;</span>
         <span class="token number">1.</span> under the circumstance that no type conversion is needed<span class="token punctuation">,</span> the one with less type deduction will be called
         <span class="token number">2.</span> <span class="token keyword keyword-if">if</span> a <span class="token keyword keyword-template">template</span> has to be called with type conversion<span class="token punctuation">,</span> it has lower precedence
         <span class="token number">3.</span> any <span class="token keyword keyword-template">template</span> with <span class="token operator">&lt;</span><span class="token operator">&gt;</span> below other <span class="token keyword keyword-template">template</span> is a specialization of another <span class="token keyword keyword-template">template</span><span class="token punctuation">.</span> 
               it is called <span class="token keyword keyword-if">if</span> <span class="token operator">and</span> only <span class="token keyword keyword-if">if</span> the deduced type fits its specialization
   <span class="token number">11.</span> can have a <span class="token keyword keyword-class">class</span> <span class="token class-name">defined</span> in another <span class="token keyword keyword-class">class</span> <span class="token class-name">under</span> <span class="token keyword keyword-private">private</span>
      <span class="token string">&quot;in this way, only usable in the class&quot;</span>
   <span class="token number">12.</span> when defining a <span class="token keyword keyword-class">class</span><span class="token punctuation">,</span> we can use the pointer to that <span class="token keyword keyword-class">class</span> <span class="token class-name">but</span> <span class="token operator">not</span> the <span class="token keyword keyword-class">class</span> <span class="token class-name">itself</span>
      <span class="token keyword keyword-this">this</span> rule is broken when the following is satisfied<span class="token operator">:</span>
         the <span class="token string">&quot;class&quot;</span> is a <span class="token keyword keyword-template">template</span>
         must <span class="token operator">not</span> involve has a relationship of <span class="token function">itself</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> pointer<span class="token punctuation">)</span>
   <span class="token number">13.</span> c string <span class="token keyword keyword-char">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword keyword-if">if</span> c string operators are used
         e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> strlen<span class="token punctuation">,</span> strcpy
      has to <span class="token string">&quot;#include &lt;cstring&gt;&quot;</span>
   <span class="token number">14.</span> trap
      <span class="token keyword keyword-class">class</span> <span class="token class-name">A</span>
      <span class="token punctuation">{</span>
         <span class="token keyword keyword-public">public</span><span class="token operator">:</span>
            <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
               <span class="token comment">/* code */</span>
            <span class="token punctuation">}</span>

            <span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> A<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> 
            <span class="token punctuation">{</span>
               <span class="token comment">/* code */</span>
            <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      A <span class="token function">a</span><span class="token punctuation">(</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// This will cause trouble: this will be taken as a function declaraction</span>
                  <span class="token comment">// The function parameter is A (*f) (), which is a function pointer</span>
                  <span class="token comment">// This function pointer takes no parameter, and returns A</span>
      A a<span class="token punctuation">{</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">// This is nornal, just using a temporary object A() to call copy constructor</span>
</pre><h2 class="mume-header" id="10-static">10. static</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   exist before we run the function
      create a <span class="token string">&quot;class object&quot;</span>
   
   <span class="token string">&quot;class related static&quot;</span>
      <span class="token string">&quot;class static variable&quot;</span><span class="token operator">:</span>
         declared inside <span class="token string">&quot;class body&quot;</span><span class="token operator">:</span>
            <span class="token keyword keyword-static">static</span> <span class="token operator">&lt;</span>type name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>variable name<span class="token operator">&gt;</span><span class="token punctuation">;</span>
         defined outside <span class="token string">&quot;class body&quot;</span><span class="token operator">:</span>
            <span class="token operator">&lt;</span>type name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>class_name<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span> <span class="token operator">&lt;</span>variable name<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token operator">&lt;</span>initial value<span class="token operator">&gt;</span>
         <span class="token string">&quot;cannot be used unless defined&quot;</span>
         <span class="token string">&quot;shared accross class objects&quot;</span>
            similar to global variables
         <span class="token string">&quot;can be used even if we do not have a class object&quot;</span>
            <span class="token operator">&lt;</span>class_name<span class="token operator">&gt;</span> <span class="token double-colon punctuation">::</span> <span class="token operator">&lt;</span>variable name<span class="token operator">&gt;</span>
         <span class="token string">&quot;can be accessed cross files&quot;</span>
      <span class="token string">&quot;class static function&quot;</span>
         <span class="token string">&quot;is actually like global funtion with a class scope&quot;</span>
         <span class="token string">&quot;can only make use of static data members of the class&quot;</span>
         can <span class="token operator">not</span> use <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span><span class="token punctuation">,</span> can <span class="token operator">not</span> call non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> functions<span class="token punctuation">,</span> can <span class="token operator">not</span> access to non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> data members
            can <span class="token operator">not</span> access non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> data members
         can <span class="token operator">not</span> be <span class="token keyword keyword-const">const</span><span class="token punctuation">,</span> nor <span class="token keyword keyword-virtual">virtual</span><span class="token punctuation">,</span> can <span class="token operator">not</span> be overloaded with non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> member function of the same prototype
         <span class="token string">&quot;called two way:&quot;</span>
            <span class="token operator">&lt;</span><span class="token keyword keyword-class">class</span> <span class="token class-name">name</span><span class="token operator">&gt;</span> <span class="token double-colon punctuation">::</span> <span class="token operator">&lt;</span>function name<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>object name<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>function name<span class="token operator">&gt;</span>
         <span class="token string">&quot;can be used even if we do not have a class object:&quot;</span>
            <span class="token operator">&lt;</span><span class="token keyword keyword-class">class</span> <span class="token class-name">name</span><span class="token operator">&gt;</span> <span class="token double-colon punctuation">::</span> <span class="token operator">&lt;</span>function name<span class="token operator">&gt;</span>
         <span class="token string">&quot;can be inherited&quot;</span>
            <span class="token string">&quot;can be overloaded by child class static functions&quot;</span>
      fundamentally speaking
         in <span class="token string">&quot;non-static class member function&quot;</span><span class="token operator">:</span>
            non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> member functions are called by
               <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            non<span class="token operator">-</span><span class="token keyword keyword-static">static</span> data members are used by
               <span class="token keyword keyword-this">this</span><span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>
         in <span class="token string">&quot;static class member function&quot;</span><span class="token operator">:</span>
            <span class="token keyword keyword-static">static</span> member functions are called by
               class_name<span class="token double-colon punctuation">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-static">static</span> data members are used by
               class_name<span class="token double-colon punctuation">::</span>data<span class="token punctuation">;</span>
            
      
   <span class="token string">&quot;file scope static&quot;</span>
      <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> a<span class="token punctuation">;</span>  <span class="token comment">// only &quot;global&quot; in file scope</span>
      <span class="token keyword keyword-int">int</span> b<span class="token punctuation">;</span>         <span class="token comment">// real &quot;global&quot;, </span>
                     <span class="token comment">// can be shared with other files with &quot;extern&quot;</span>
      <span class="token keyword keyword-extern">extern</span> <span class="token keyword keyword-int">int</span> a<span class="token punctuation">;</span>  <span class="token comment">// using &quot;global&quot; from other files</span>
                     <span class="token comment">// only for normal global</span>
      <span class="token string">&quot;cannot do extern on static&quot;</span>
   <span class="token string">&quot;function scope static&quot;</span>
      e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
      <span class="token keyword keyword-int">int</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> n<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> calls<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
         <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> num_calls <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// Initialized only once</span>
                                    <span class="token comment">// Will not initialize again even if called multiple times</span>
         <span class="token comment">// ...</span>
         <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token comment">/* something */</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="11-makefile">11. makefile</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token number">1.</span><span class="token string">&quot;Prerequisites&quot;</span>
      checks the last modification time <span class="token operator">and</span> automatically regenerate the files modified

   <span class="token number">2.</span><span class="token string">&quot;Automatic variables&quot;</span>
      $@
         target files
      $<span class="token operator">&lt;</span>
         the first prerequisite
      $<span class="token operator">^</span>
         all the prerequisites

   <span class="token number">3.</span><span class="token string">&quot;Pattern rule&quot;</span>
      <span class="token operator">%</span>
         matching any non<span class="token operator">-</span>empty substring

         in prerequisite
            refers to the same substring matched by the <span class="token string">&apos;%&apos;</span> of targets

   <span class="token number">4.</span><span class="token string">&quot;Phony targets&quot;</span>
      Do <span class="token operator">not</span> refer to actual files<span class="token punctuation">,</span> but actions

   <span class="token number">5.</span><span class="token string">&quot;Variables&quot;</span>
      <span class="token string">&quot;When defining&quot;</span>
         XXX <span class="token operator">=</span> XXX
      <span class="token string">&quot;When using&quot;</span>
         $<span class="token punctuation">(</span>XXX<span class="token punctuation">)</span>
</pre><h2 class="mume-header" id="03-include-guards">03. include guards</h2>

<pre data-role="codeBlock" data-info="c++" class="language-cpp">   <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span></span>
      works like copy <span class="token operator">and</span> paste
      include guard can prevent including too files <span class="token keyword keyword-for">for</span> multiple times

   in <span class="token punctuation">.</span>h files
      <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">LAMP_H </span><span class="token comment">// for lamp.h, just a convention</span></span>
      <span class="token comment">// _IOSTREAM_ for iostream</span>
      <span class="token comment">// LAMP_H for lamp.h</span>
      <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LAMP_H</span></span>
      <span class="token comment">// object declarations, class definitions, functions</span>
      
      <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// LAMP_H</span></span>
   <span class="token string">&quot;it is a good practice to write an include guard for all the .h files&quot;</span>
</pre></div></body></html>
    </div>
  </body>
</html>
